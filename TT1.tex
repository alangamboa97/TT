\documentclass[12pt,letterpaper]{article}
\usepackage[spanish]{babel}
\usepackage{amsmath}
\usepackage[latin1]{inputenc}
\usepackage{graphicx}
\usepackage{amssymb}
\usepackage{anysize}
\usepackage{array}
\usepackage{lmodern}
\usepackage{adjustbox}
\usepackage{titlesec}
\usepackage{float}

\marginsize{2cm}{2cm}{1cm}{1cm}
\usepackage{fancyhdr}

\pagestyle{fancy}
\fancyhf{}
\fancyhead[L]{\footnotesize UPIITA}
%\fancyfoot[R]{\footnotesize Diseño}
\fancyfoot[R]{\thepage}
\fancyfoot[L]{\footnotesize Proyecto Terminal 1}
\renewcommand{\footrulewidth}{0.4pt}
\usepackage{graphics}
\usepackage{capt-of}
\usepackage[pdftex=false,colorlinks=true,plainpages=true,citecolor=blue,linkcolor=blue]{hyperref}
\setlength\parindent{0pt}
\usepackage[usenames]{color}
\usepackage{pdfpages}
\usepackage{float}
\usepackage{shapepar}

\begin{document}
\renewcommand{\tablename}{Tabla}
\renewcommand{\listtablename}{Índice de tablas}

\begin{titlepage}

\newcommand{\HRule}{\rule{\linewidth}{0.3mm}}

\includegraphics[scale=0.45]{imagenes/ipn}
\hspace{10cm}
\includegraphics[scale=0.15]{imagenes/upiita}
\\


\begin{center}


\textsc{\Large ``Sistema para el monitoreo, detección y alerta de somnolencia del conductor mediante visión artificial, comunicación inalámbrica y geolocalización''}\\[0.5cm]



\HRule \\[0.4cm]
{ \huge \bfseries Proyecto Terminal 1}\\[0.4cm]

\HRule \\[1.5cm]



\begin{minipage}{0.4\textwidth}
\begin{flushleft} \large
\emph{\\Autores:}\\
Alan Eduardo Gamboa Del Ángel\\
Maite Paulette Díaz Martínez\\
Nilsen Alfaro Parra\\

%Grupo:4MM6\\
\end{flushleft}
\end{minipage}
\begin{minipage}{0.5\textwidth}
\begin{flushright} \large
\emph{Asesores:} \\
M.en C. Niels Henrik Navarrete Manzanilla\\
Dr. Rodolfo Vera Amaro\\

\end{flushright}
\end{minipage}

\vfill

06 de Enero 2023

\end{center}


\end{titlepage}
\newpage
\tableofcontents
\newpage
\listoffigures
\newpage
\listoftables


\newpage
\section{Resumen}

El presente documento detalla el proceso de diseño del proyecto titulado "Sistema para el monitoreo, detección y alerta de somnolencia del conductor mediante visión artificial, comunicación inalámbrica y geolocalización" como Proyecto Terminal, dirigido a conductores de la ciudad de México. Dicho sistema hará uso de técnicas de visión artificial, tales como las funciones Haar para la detección de rostro, ojos y boca del conductor a partir de la entrada de video en tiempo real, así como la propuesta del uso de una red neuronal convolucional entrenada para poder detectar el estado de los ojos. El sistema utilizará puntos de referencia faciales para marcar la posición de la boca y posteriormente se obtendrá la relación de apertura de la boca, con el fin de detectar si se trata de un bostezo. Si el sistema detecta somnolencia, se activará una alarma con intención de alertar al conductor, a su vez, se realizará un reporte de incidencia el cual será enviado a una base de datos. El sistema utilizará una Raspberry Pi para su funcionamiento de manera portátil. Como parte del sistema se analizó y diseñó un sistema de administración que permitirá al usuario verificar y visualizar la información de los reportes de incidencia y la información de cada conductor. Para el cual se diseñó una aplicación web que le permita al usuario acceder a la información y adicionalmente monitorear la ubicación en tiempo real del conductor. \\

\emph{\textbf{Palabras Clave:}} Somnolencia, Visión artificial, Geolocalización, Machine Learning, Alerta, Red Neuronal Convolucional.

\section{Abstract}
This document details the design process of the project entitled "System for the monitoring, detection and alert of driver drowsiness through computer vision, wireless communication and geolocation" as a Terminal Project, aimed at drivers in Mexico City.This system will make use of computer vision techniques, such as the Haar functions for the detection of the driver's face, eyes and mouth from the video input in real time, as well as the proposal of the use of a convolutional neural network trained to to be able to detect the state of the eyes. The system will also use facial lanmark points to mark the position of the mouth and then the mouth opening ratio will be obtained, in order to detect if it is a yawn. If the system detects drowsiness, an alarm will be activated with the intention of alerting the driver, in turn, an incident report will be made which will be sent to a database. The system will use a Raspberry Pi for its portable operation. As part of the system, an administration system was analyzed and designed that will allow the user to verify and view the information of the incident reports and the information of each driver. For which a web application was designed that allows the user to access the information and additionally monitor the location in real time of the driver.\\


\emph{\textbf{Keywords:}} Drowsiness, Computer Vision, Geolocation, Machine Learning, Alert, Convolutional Neural Network.


\newpage
\section{Capítulo I: Introducción }

De acuerdo con el Informe sobre la situación mundial de la seguridad vial 2018, publicado por la Organización Mundial de la Salud (OMS), el número anual de muertes por accidentes de tránsito llego a los 1,35 millones. Sin embargo, las consecuencias de estos accidentes no solamente afectan al conductor y a los pasajeros del vehículo, sino que también involucran a los peatones, ciclistas y motociclistas, en particular aquellos que residen en países en desarrollo. \cite{WHO}\\

La somnolencia al conducir es reconocida como un factor que puede contribuir a los percances viales. De acuerdo a datos de CONAPRA, en México cada año mueren en promedio 16,500 mexicanos por percances de este tipo. Con base en estimaciones hechas por el Secretariado Técnico del Consejo Nacional para Prevención de Accidentes (STCONAPRA), los accidentes viales le cuestan al país alrededor de 150 mil millones de pesos que representan el 1.7 \% del Producto Interno Bruto (PIB), sumando costos directos e indirectos. \cite{IMT}  \\

La somnolencia, al momento de conducir se trata de un fenómeno complejo que implica disminuciones en los niveles de alerta y conciencia por parte del conductor. Esta situación se convierte en un detonador de accidentes pues disminuye en el sujeto la capacidad de identificar situaciones de riesgo y por tanto evitar el peligro.\cite{IMT} \\

En el desarrollo logístico de empresas que se encargan de transportar a pasajeros o que se encargan de repartir paquetería, los datos pueden verse de forma más alarmante o preocupante, ya que, usualmente, las personas designadas como conductores se enfrentan a largas horas de jornada sin descanso y en muchos casos, rotan por horarios que pueden ser en el día o en la noche, aumentando el riesgo de accidentarse por el desbalance de tener un horario mixto.\\ 

Muchas de estas empresas optan por sistemas de rastreo de vehículos, que hoy es un recurso determinante para la planificación de rutas de distribución al optimizar las mismas y, lo más importante, al estar en un constante monitoreo se puede tener la certeza de que se está siguiendo la ruta marcada correctamente. \cite{TastreoSatelital}  \\

El rastreo satelital de vehículos funge como una de las principales opciones de sistemas capaces de indicar la ubicación de los vehículos en cuestión, sin embargo, el costo es elevado y periódico. \\

Tomando en cuenta el contexto antes planteado, se analizará y diseñará en el presente documento un sistema que alerte a un conductor con somnolencia, mediante el uso de una cámara digital y algoritmos de visión artificial, además de incluir un sistema de administración que permita la geolocalización del sistema en tiempo real, así como la gestión de conductores y reportes de incidencias. 
  

\newpage
\subsection{Planteamiento del problema}

La somnolencia es un fenómeno complejo de analizar debido a los factores que pueden intervenir. Algunas de las características más notorias de un estado de somnolencia, se pueden apreciar principalmente en el rostro de las personas: frecuencia de parpadeo, bostezos, movimientos faciales y cabeceos, los cuales son parámetros claves para determinar si una persona está en estado de somnolencia o vigilia.  \\

Gracias a los avances tecnológicos en los últimos años, se han comenzado a desarrollar técnicas de visión artificial y aprendizaje automático que permiten detectar patrones de manera más eficiente. En el área del hardware, se han desarrollado microordenadores capaces de realizar tareas que requieran un nivel moderado de computación de una manera eficaz. Finalmente, en el área de telecomunicaciones, tecnologías como el 4G y avances en el área de \emph{Internet of Things} han permitido mayores velocidades de transmisión de datos, así como mayor cobertura dentro del territorio nacional.\\ 

Hoy en día, se están comenzando a utilizar tecnologías para prevenir y detectar síntomas de fatiga y somnolencia en conductores. Donde se han realizado diversos estudios y soluciones que intentan dar respuesta al problema de monitoreo de la somnolencia. \\

Uno de estos métodos está basado en el comportamiento del vehículo, el cual detecta el estado del conductor mediante el análisis de distintas métricas como son: movimientos del volante, posición del vehículo, la presión del acelerador o del freno, cambio de velocidades, con los cuales se determina la posibilidad de que el conductor se encuentre en estado de somnolencia. El principal problema de dicho método es que las características individuales del vehículo, conductor y carretera repercuten en la eficacia del sistema. \cite{Sistemasdesomnolencia}  \\


Existen también sistemas que analizan el comportamiento del vehículo y su entorno. Esto sistemas cuentan con cámaras frente al vehículo, donde se digitaliza el entorno del vehículo; posteriormente se analizan parámetros como la reacción del conductor frente a la dirección de su vehículo con respecto a la carretera, velocidad, comportamiento del vehículo frente a baches en la carretera y distancia con respecto al vehículo que esta adelante. Si se detecta un comportamiento anormal en los parámetros anteriormente mencionados, se procede a realizar las alertas necesarias para advertir al conductor. No obstante, estos sistemas suelen ser costosos y no toman en cuenta el estado del conductor.  \\

Por otra parte, se encuentran los métodos que se basan en el análisis de variables fisiológicas, los cuales permiten la detección de somnolencia en sus fases tempranas con una baja tasa de falsos positivos. Se destacan los métodos basados en: electroencefalograma (EEG), electromiograma (EMG), electrocardiograma (ECG) y electrooculograma (EOG). \cite{Sistemasdesomnolencia}  \\  

Cabe mencionar que, entre todos los métodos, el EEG es el más común para la detección de la somnolencia, donde se analizan diferentes bandas de frecuencia. Todas estas señales brindan información adicional al momento de analizar el estado de somnolencia de una persona. Sin embargo, estos métodos requieren contacto con el conductor y el uso excesivo de canales de encefalogramas, lo cual resta comodidad, maniobrabilidad y practicidad al conductor, además de poder llegar a ser invasivos, lo cual puede llegar a entorpecer el desempeño del conductor. \cite{Sistemasdesomnolencia}  \\

Finalmente, se encuentra el análisis de características visuales que puede presentar un conductor somnoliento, como los movimientos faciales, parpadeos rápidos y constantes, cabeceos y bostezos frecuentes. Sin embargo, los bostezos se presentan generalmente antes de que el conductor entre en somnolencia, mientras que, los cabeceos normalmente ocurren cuando el conductor se duerme. Por lo que estos métodos no son capaces de detectar con exactitud cuando un conductor está empezando a entrar en un estado de somnolencia, sin embargo, son los métodos visuales más adecuados para dicho propósito. \cite{Sistemasdesomnolencia}   Por tanto, se debe tomar en cuenta las diferencias temporales entre los distintos signos visuales, por lo que realizar la combinación de varias de estas características aumentará la robustez final del sistema, logrando una mejor eficacia en el sistema.  \\  

Debido a las dificultades que pueden presentarse en los sistemas a la hora de detectar la somnolencia y la eficacia de este, así como las dificultades que muchos de los sistemas anteriores presentan en cuanto al espacio y potabilidad, se hará uso del método de análisis de características visuales para brindar una mejora y complemento a los sistemas actuales, usando visión artificial, además de integrar un sistema de monitoreo que permita a un tercero seguir la ubicación del conductor y registrar las incidencias del mismo.  \\

Actualmente existen varias opciones para la geolocalización de vehículos en tiempo real, pero con costos elevados, como lo es el rastreo satelital el cual requirere un pago servicio con una suscripción anual o mensual. Entonces, surge una oportunidad para desarollar soluciones más asequibles y que sean igualmente eficaces, como es el caso de las redes móviles LTE.

Dadas las posibles soluciones y escenarios antes mencionados se plantea la siguiente pregunta: ¿Cómo desarrollar un sistema portátil que pueda detectar la somnolencia y alertar al conductor, además de monitorear la ubicación en tiempo real y gestionar las incidencias detectadas en el conductor? 


\subsection{Propuesta de solución}

Como respuesta a la problemática planteada en la sección 3, se propone el desarrollo de un sistema portátil que sea capaz de detectar somnolencia en conductores y su vez activar una alarma que permita alertar al conductor. Adicionalmente se desarrollará como parte del sistema, un subsistema que permita la administración y validación de las incidencias reportadas, así como el monitoreo GPS del conductor en tiempo real dentro de la Ciudad de México.  \\

Los problemas que resolverá el sistema serán listados a continuación: \\

\begin{itemize}
\item El sistema será portátil por lo que se hará uso de un microordenador para poder ser instalado y que funcione dentro de un vehículo. 
\item Mediante una cámara digital conectada al microordenador, el sistema analizará el rostro del conductor en tiempo real, tomando en cuenta parámetros de análisis tales como; rostro, ojos y boca del conductor. 
\item El sistema hará uso de técnicas de visión artificial para poder detectar si el conductor presenta signos de somnolencia. 
\item En caso de presentarse un caso de somnolencia, el sistema activará una alarma para alertar al conductor. 
\item Al mismo tiempo, el sistema realizará y almacenará un reporte de incidencia que contendrá datos como fecha, hora, ubicación geográfica, y un pequeño video clip que muestre el momento en que el conductor presentó signos de somnolencia. 
\item Posteriormente, el sistema hará uso de redes de telecomunicaciones móviles para enviar el reporte de incidencia previamente generado hacía una estación base que funcionará mediante una aplicación web, dónde un administrador podrá verificar este reporte con el fin de confirmar que se trata de un caso de somnolencia y no un falso positivo. 
\item A su vez, el administrador podrá consultar la ubicación en tiempo real del conductor desde la misma estación base.
\item En la figura 1 se muestra la propuesta del diagrama general de diseño de la arquitectura del sistema.    

\end{itemize}


\begin{center}
  \includegraphics[scale=0.4]{imagenes/propuestasolucion}
\captionof{figure}{Diagrama general del diseño preliminar de la arquitectura del sistema. }
 \label{fig:Arquitecturapreliminar} 
\end{center} 


\subsection{Alcances}

A continuación, se describen los alcances de la propuesta de solución: 

\begin{itemize}
\item Detectar síntomas de somnolencia del conductor.
\item Alertar al conductor mediante una alarma en caso de que se detecten síntomas de somnolencia.
\item El sistema realizará un reporte de incidencia al detectar somnolencia. 
\item Solicitar el posicionamiento por medio de una tecnología de geolocalización en tiempo real. 
\item La transmisión de los datos del módulo de procesamiento se realizará mediante una red inalámbrica.
\item Se trazará la ruta en el mapa de la trayectoria ejecutada por el conductor y se mostrará en la aplicación web.
\item Las pruebas a realizar serán en la Ciudad de México donde se cuente con cobertura de redes móviles garantizada.
\item La aplicación web permitirá consultar las incidencias de los conductores, así como la fecha y hora de estas, además de la ubicación de cada conductor en tiempo real. 

\end{itemize}

 
\subsection{Escenario de pruebas}

Las pruebas se dividirán en dos fases:\\
 
\textbf{Fase 1:}

En la primera fase se probará el sistema de somnolencia y el sistema de administración de manera separada, con el propósito de analizar los resultados obtenidos. Para el sistema de detección de somnolencia será colocado dentro del vehículo, sin embargo, dicho vehículo permanecerá estacionado y con el motor apago, esto con el fin de realizar pruebas de la precisión del sistema y poder ajustar parámetros en caso de ser necesario.\\  

En un primer escenario se examinarán los siguientes signos de somnolencia sin el uso de gafas de sol:\\ 

Estado de los ojos:  

\begin{itemize}
\item Abiertos, cerrados. 
\item Duración de estos estados. 
\end{itemize}

Bostezos: 

\begin{itemize}
\item Apertura de la boca. 
\end{itemize}

En un segundo escenario se examinarán los mismos signos de somnolencia con el uso de gafas de sol.  \\

Estas pruebas se realizarán tanto de noche como de día para comprobar la efectividad del sistema. En caso de ser necesario, se realizarán los ajustes correspondientes en los parámetros de análisis para mejorar la efectividad de las pruebas. Así mismo se verificará que la alarma se active correctamente al detectar somnolencia en el conductor.  \\

Para el sistema de administración se probará la aplicación web que incluye el acceso a la geolocalización del sistema en tiempo real, así como pruebas de estrés al servidor de alojamiento, con el fin de conocer la eficacia de respuesta del sistema durante periodos de tráfico de datos elevados. \\
 
\textbf{Fase 2:}

En la segunda fase, se probará el sistema completo con el vehículo en movimiento, donde el sistema estará monitoreando el estado de somnolencia del conductor en todos sus trayectos.  \\

Para el sistema de administración se corroborará que en los casos en que el sistema de somnolencia detecte una incidencia, esta sea enviada correctamente y pueda ser visualizada desde el sistema de administración. A su vez, se constará que la información de la ubicación geográfica del sujeto de prueba esté disponible en todo momento.  

\subsection{Justificación}

Actualmente, nos encontramos en la era digital donde se han desarrollado diferentes avances tecnológicos tales como el internet de las cosas (IoT) el cual permite la comunicación con dispositivos y da pauta al desarrollo de sistemas inteligentes que resuelven problemas complejos de manera automática y eficaz en ambientes específicos, la inteligencia artificial, el machine learning, el procesamiento masivo de datos en menor tiempo, entre muchos otros. \\

El sistema propuesto será capaz de detectar la somnolencia apoyado en estudios donde se analizan los aspectos fisiológicos y donde se delimitan los datos biométricos del estado de somnolencia obtenidos en diferentes pruebas, mediante el uso de visión artificial y deep learning para tener mejores resultados y posteriormente ser enviados a una estación base con ayuda de la tecnología de las redes inalámbricas. \\

Al haber accidentes de tránsito por somnolencia en México, con este proyecto se pretende prevenirlos e integrar un sistema que permita el monitoreo del vehículo mediante la geolocalización del mismo, el uso de una alarma auditiva para que el conductor se mantenga alerta, así como un sistema interactivo con los usuarios que permita visualizar las incidencias que se puedan presentar por parte de los conductores.\\ 

Ofreciendo así un sistema que utilice las tecnologías de la nueva generación que permitan el monitoreo, la detección y la alerta del conductor. 


\subsection{Metodología}


Debido a que el presente proyecto conjunta la parte de software con hardware, se estarán implementando dos metodologías.  

\begin{itemize}

\item \textbf{Top-Down}


La metodología de diseño \emph{Top-Down} consiste en dividir un problema complejo en problemas o partes más pequeñas con mayor facilidad de resolución. A este proceso se le llama \emph{Descomposición}. Estas partes pueden ser llamadas modulos o subrutinas. Cada módulo puede ser probado individualmente. \cite{Top-Down}   


\begin{center}
  \includegraphics[scale=0.5]{imagenes/Top-down}
\captionof{figure}{Descomposición en la metodología \emph{Top-Down}. \cite{Top-Down}   }
 \label{fig:neurona}
\end{center}

Utilizando la metodología Top-Down, se puede dividir el sistema en módulos que serán independientes de sí mismo, esto con la finalidad de ahorrar tiempo, así como recursos para su mantenimiento. Por lo tanto, en este proyecto se comenzará entendiendo el problema general para posteriormente poder realizar una subdivisión de problemas más pequeños para ser resueltos de manera invididual.


\item \textbf{UML}

UML es el estándar de la industria para modelar sistemas orientados a objetos \cite{kendall}. UML incluye un conjunto de herramientas que permite visualizar la construcción de un sistema orientado a objetos. Al trabajar por iteraciones, se aborda de manera cada vez con más detalle el diseño de sistema, hasta que se defina con claridad las relaciones de cada uno de los objetos del sistema. Uno de las principales ventajas de UML es la reutilización de objetos, esto permite reducir costo de desarrollo así como de mantenimiento de los programas. 

\end{itemize}


\newpage
\subsection{Objetivos}

\subsubsection{Objetivo General}

Analizar y diseñar un sistema para la detección de síntomas de somnolencia y alerta del conductor. Además de ser capaz de obtener la ubicación del conductor en tiempo real para ser monitoreada desde una aplicación web que a su vez permita gestionar y visualizar los reportes de incidencias del mismo. 

\subsection{Objetivos Específicos}

\textbf{Para Trabajo Terminal 1:}

\begin{itemize}
\item Diseñar un sistema de visión artificial que sea capaz de detectar la somnolencia en conductores.
\item Diseñar un sistema de geolocalización en tiempo real usando redes de telecomunicaciones.
\item Diseñar un sistema de administración para la gestión de usuarios, almacenamiento de datos y consultas de las incidencias de cada conductor. 
\item Diseñar un sistema de comunicaciones que permita la interconexión entre el sistema de visión artificial y el sistema de administración.  
\end{itemize}


\textbf{Para Trabajo Terminal 2:}

\begin{itemize}
\item Implementar un sistema de visión artificial que sea capaz de detectar la somnolencia en conductores.
\item Implementar un sistema de geolocalización en tiempo real usando redes de telecomunicaciones.
\item Implementar un sistema de administración para la gestión de usuarios, almacenamiento de datos y consultas de las incidencias de cada conductor. 
\item Implementar un sistema de comunicaciones que permita la interconexión entre el sistema de visión artificial y el sistema de administración.  
\end{itemize}

\newpage
\section{Capítulo II: Marco de Referencia}

\subsection{Marco Teórico}
\subsubsection{Raspberry Pi}

La Raspberry Pi es una computadora de bajo costo y con un tamaño compacto, puede ser conectada a un monitor de computador o un TV, y usarse con un mouse y teclado estándar. Es un pequeño computador que corre un sistema operativo linux capaz de permitirle a las personas aprender a programar en lenguajes como Scratch y Python. Es capaz de hacer la mayoría de las tareas típicas de un computador de escritorio, desde navegar en internet, reproducir videos en alta resolución, manipular documentos de ofimática, hasta reproducir juegos. [1] 

% https://raspberrypi.cl/que-es-raspberry/

\subsubsection{Visión Artificial}
Se puede definir como el conjunto de técnicas para la extracción de información de imágenes digitales. El tipo de información obtenida de una imagen puede ser de identificación, mediciones para navegación, o aplicaciones de realidad aumentada\cite{vision}.El campo de visión artificial puede verse como una parte de la informática. La teoría de algoritmos y el aprendizaje automático son esenciales para el desarrollo de algoritmos de visión artificial.
La visión artificial está compuesta generalmente por un conjunto de procesos destinados a realizar el análsis de imágenes:captación de imágenes, memorización de la información, proceso e interpretación de los resultados\cite{vision}.



\subsubsection{Red Neuronal}

Una red neuronal es un sistema que pretende emular ciertas características propias de los seres humanos, tales como la capacidad de memorizar o y asociar hechos o características. Este sistema está se basa en el concepto de \emph{neurona}.

\begin{center}
  \includegraphics[scale=0.5]{imagenes/neurona}
\captionof{figure}{Módelo estándar de una neurona artificial}
 \label{fig:neurona}
\end{center}

Un módelo simplificado de una neurona artificial consta de dos etapas.
En la primera etapa, las entradas provenientes de otras neuronas son combinadas tomando en cuenta los pesos de las sinapsis. Como resultado de esta etapa surge la entrada neta o \emph{excitación} de la neurona. En la segunda etapa, la entrada neta se utiliza para determinar el valor de salida de la neurona, que posteriormente será propagada a otras neuronas.

En la etapa de integración de las entradas, una neurona combina las distintas entradas $ x_i$ con sus pesos para así determinar su entrada neta $z_j$: 

\begin{equation}
zj = \sum_{i}w_{ij}x_i
\end{equation}

Dónde $w_{ij}$ representan los pesos sinápticos asociadas desde la \emph{i}-ésima neurona hasta la \emph{j}-ésima. Estos pesos tendrán valores real. Positivos para modelar conexiones excitatorias y negativos para conexiones inhibitorias.

Por otra parte, en la etapa de activación de una neurona, esta utiliza el valor asociado a su entrada neta para generar una salida $y_j$:

\begin{equation}
y_j(t)= F(y_j(t-1), z_j(t)) = F(y_j(t-1),net_j(t))
\end{equation}

\subsubsection{Redes Neuronales Convolucionales}

Las redes neuronales convolucionales, tambien conocidas como \emph{redes convolutivas}, son redes neuronales artificiales que se utilizan comunmente para resolver problemas que requieren el procesamiento de imágenes. Sus casos de uso más frecuentes van desde la detección de objetos, hasta generar una descripción textual del contenido de una imagen. Particularmente, sus entradas y salidas pueden ser estructuradas. Esto quiere decir, que en lugar de recibir un vector de entradas, se puede recibir un vector (1D), matriz (2D) o tensor($>2D$). En el caso de señales bidimensionales, las entradas pueden pertenecer a los pixeles de una imágen capturada por una cámara.

Como su nombre lo indica, esta red neuronal utiliza la operación de convolución. La convolución es una operación matemática que se realiza sobre dos funciones para producir una tercera que se suele interpretar versión modificada (filtrada) de las funciones originales.\cite{Referencia0}

\

La convolución entre las funciones \emph{f} y {g} se representa de la siguiente manera:
\begin{equation}
(f\star g)(t) = \int_{-\infty}^{\infty} f(\tau )g(t-\tau )d\tau = \int_{-\infty}^{\infty} f(t-\tau)g(\tau)d\tau
\end{equation}


En el caso particular de procesamiento digital de imágenes, las variables $[n_1,n_2]$ corresponden a cordenadas $[x,y]$ de los píxeles de una imagen. Además, el signo menos que aparece en la Ecuación 8, se suele sustituir por un signo más, por lo cual la definición de convolución se expresaría como:

\begin{equation}
(x\star h)[x,y] = \sum_{k_1=0}^{K_1-1}\sum_{k_2=0}^{K_2-1} h[k_1,k_2] x[x+k_1,y +k_2]
\end{equation}


\emph{Capas convolutivas}\\
El componente clave de las redes neuronales convolucionales son las capas, que sustituyen la tradicional multiplicación de pesos por entradas. La entrada de una capa convolutiva es una señal,en el caso de imágenes, una señal bidimensional. Dicha señal es procesada realizando una convolución con una máscara o \emph{kernel}. Los pesos correspondientes al \emph{kernel} serán los parámetros de la capa convolutiva que será entrenada.
A continuación se presenta la representación más simple de las capas de una red neuronal convolucional.

\begin{center}
  \includegraphics[scale=0.45]{imagenes/cnn2} 
\captionof{figure}{Arquitectura general de una Red Neuronal Convolucional}
 \label{fig:boost}
\end{center}

\begin{itemize}
	\item Capa Convolucional
	
Esta capa se utiliza para extraer las diversas características de las imágenes de entrada. En esta capa se realiza la convolución entre la imagen de entrada y un \emph{kernel} de un tamaño particular $MxM$.

La salida se denomina mapa de características, que nos brinda información sobre la imagen, como las esquinas y los bordes. Posteiormente, este mapa de características se alimenta a otras capas para aprender otras características de la imagen de entrada.

La capa de convolución en CNN entrega el resultado a la siguiente capa una vez que se aplica la  en la entrada.

\item Capa de \emph{Pooling}

El objetivo principal de esta capa es disminuir el tamaño del mapa de características convolucionado para reducir los costos computacionales. Esto se realiza disminuyendo las conexiones entre capas y opera de forma independiente en cada mapa de características. Según el método utilizado, existen varios tipos de operaciones de agrupación. Básicamente resume las características generadas por una capa de convolución. El tipo de pooling más utilizado es el \emph{max-pooling}. Este devuelve el valor máximo del fragmento de la imágen filtrada por el kernel.

\begin{center}
  \includegraphics[scale=1]{imagenes/maxpool} 
\captionof{figure}{Ejemplo de Max Pooling}
 \label{fig:boost}
\end{center}

\item \emph{Fully Connected Layer}

La capa totalmente conectada  consta de los pesos y sesgos junto con las neuronas y se utiliza para conectar las neuronas entre dos capas diferentes.La imagen de entrada de las capas anteriores se aplana y se alimenta esta capa. Luego, el vector aplanado pasa por unas pocas capas  más donde normalmente tienen lugar las operaciones de las funciones matemáticas. En esta etapa comienza el proceso de clasificación.

\item \emph{Output Layer}

Esta capa se encarga de mejorar el rendimiento de un modelo de aprendizaje automático, ya que evita el sobreajuste al simplificar la red. Descarta neuronas no escenciales de la red neuronal durante el entrenamiento.

\item \emph{Funciones de activación}

Son funciones matemáticas que determinan la salida de una capa de la red neuronal, y se utilizan en capas convolucionales así cómo en las capas completamente conectadas. Estas funciones se utilizan para asignar los valores de las salidas de cada capa entre valores definidos, para así facilitar que el modelo se adapte a una gran variedad de datos. 

\item \emph{Flattening}

Flattening consiste en convertir los datos de salida de la capa convolucional a una matriz unidimensional para ser llevada a la capa siguiente.


\end{itemize}
\subsubsection{Cascadas Haar}
Existen técnicas de visión artificial que permiten el reconocimiento de objetos en una imágen o cuadros en un video. Entre los que más destacan, se encuentran las Cascadas Haar. Esta técnica fue presentada por primera vez por Viola y Jones\cite{viola} Las Cascadas Haar implica entrenar una serie de clasificadores simples  y luego combinar su salida.\\

Posteiormente estas salidas de transforman en un \emph{clasificador h(x)} como una suma de valores de \emph{aprendices débiles}:



\begin{equation}
h(x) = sgn \left [  \sum_{j=0}^{m-1} \alpha_{j}h_j(\bold{x}) \right ]
\end{equation}


los aprendices débiles $h_j(\bold{x})$ son funciones extremadamente simples de la entrada.
En la mayoría de las variantes de Cascadas Haar, los aprendices débiles son funciones umbrales,
que también son conocidos como \emph{desicion stumps} consideradas como la forma más simple de un árbol de decisiones.

\begin{center}
  \includegraphics[scale=0.5]{imagenes/clasificadores}
\captionof{figure}{Boosting}
 \label{fig:boost}
\end{center}

Después de que cada clasificador débil es seleccionado, los \emph{data points} que han sido clasificados de manera incorrecta aumentan su peso. El clasificador final es una combinacion lineal de los clasificadores débiles.


\subsubsection{\emph{Content Delivery Network}}

Una Red de Distribución de Contenido, o CDN por sus siglas en inglés, es de una red de servidores que se encarga de mejorar el rendimiento en la carga y descarga de contenido de la red. Los componentes de una CDN se encuentran distribuidos en diferentes nodos. Estos componentes pueden ser servidores y se encuentran con contenido replicado alrededor del mundo. El trabajo de una CDN consiste en redirigir la solicitudes de los clientes a un servidor ubicado geográficamente cerca de estos. En consecuencia, los clientes obtienen los datos solicitados a una velocidad más rápida.

\begin{center}
  \includegraphics[scale=0.5]{imagenes/cdn-diagram} 
\captionof{figure}{Arquitectura de una CDN}
 \label{fig:boost}
\end{center}

Además de esto, una CDN es capaz de detectar cambios en la información existente, así como detectar la disponibilidad de nuevo contenido en los servidores de origen.


\subsubsection{Estándares y Protocolos de Comunicación Inalámbrica}

Para transferir datos o información de un punto a otro sin la utilización de cableado o algún medio físico, tenemos las redes inalámbricas que utilizan ondas de radio para conectar a los 
dispositivos permitiendo así, a los dispositivos remotos, se conecten sin 
dificultad y sin importar que estos dispositivos estén a unos metros o incluso a varios 
kilómetros de distancia \cite{Referencian1}. Se dividen en 4 tipos dependiendo del alcance requerido y se definen por el estándar 802.11 del IEEE que es el organismo de estandarización internacional \cite{Referencian2}.

\begin{itemize}

\item \textbf{Red  inalámbrica de area amplia (WWAN)}\\

Usan ondas de radio pero transmite a uno o varios puntos de acceso inalámbrico donde un usuario inalámbrico puede conectarse a la red, al disponer de un ancho de banda más elevado ofrece una mejor cobertura. \\\\
Como ejemplo de estas redes se tienen la tecnologías 4G y 5G. 
Son conocidas como redes de largo alcance con cobertura de hasta 100km, pueden dar soporte a gran parte del territorio geográfico\cite{Referencian5}. 

En esta red se incluyen:
\begin{itemize}
\item \textbf{Celulares}\\
Es conocida como la red de telefonía móvil.
\end{itemize}
\begin{itemize}
\item \textbf{LPWAN(\emph{Low Power Wide Area Network}): Red de Área Amplia de Baja Frecuencia}\\
son redes de área amplia y de baja potencia, es un 
protocolo de transporte inalámbrico de datos que hoy en día se utiliza como uno de los 
protocolos básicos para la implementación de IoT.
Existen varias implementaciones del protocolo LPWAN, tales como Sigfox,LoRaWAN, NB-IoT y LTE. Hay muchas diferencias entre cada una de ellas en 
cuanto a los esquemas de modulación, el alcance geográfico, la cantidad de información
transmitida y a sus capacidades de encriptación y autenticación\cite{Referencian6}.
\end{itemize}

Las interfaces de comunicación inalámbrica LPWAN consideradas son:

\subsubsection{LTE-M}
LTE-M es el término simplificado de la industria para el estándar tecnológico de Área Amplia de Baja Potencia (LPWA por sus siglas en inglés). Se refiere específicamente a la tecnología LTE CatM1.

Es una tecnología de área amplia de baja potencia que admite IoT a través de dispositivos poco complejos y proporciona una cobertura extendida, al tiempo que permite la reutilización de la base instalada de LTE.\\

Las redes LTE-M coexistirán con las redes móviles 2G, 3G y 4G y se beneficiarán de todas las características de seguridad y privacidad de las redes móviles, como la confidencialidad de la identidad del usuario, la autenticación de la entidad, la privacidad, la integridad de los datos y la identificación del equipo móvil\cite{Referencian7}.

A continuación se describen las ventajas principales de LTE-M:

\begin{itemize}
\item \textbf{Ahorro de Energía}

LTE-M permite que los dispositivos IoT usen un modo de ahorro de energía, que les permite "ir a dormir" cuando no están en uso. Y tampoco tienen que despertarse para enviar solo la actualización de ubicación, sino que pueden extender los tiempos de suspensión por un período de tiempo más largo. LTE-M también permite que los dispositivos usen recepción discontinua extendida (eDRX). Cuando el dispositivo está fuera del modo suspendido, verifica periódicamente la información del enlace descendente. Con eDRX, se aumenta el tiempo de verificación de la radio, lo que reduce el consumo de energía.

\item \textbf{Cobertura}


Las redes LTE-M/Cat-M1/Cat-M2 pueden utilizar la infraestructura 4G LTE existente. Esta es una ventaja significativa, ya que más del 50 por ciento de las conexiones móviles globales se realizan en redes 4G. 

Con una pérdida de acoplamiento máxima (MCL) de 156 decibelios (dB), 14 dB más alta que LTE, las redes LTE-M también ofrecen mayor cobertura y mejor penetración en interiores. La señal puede manejar muchas interferencias de edificios y otras estructuras que obstruyen su camino.

\item \textbf{Velocidad de Transferencia}

Comparado con LTE, LTE-M no es particularmente rápido. Pero 1 megabit por segundo para transmisiones de enlace ascendente y descendente es excepcional en comparación con redes más antiguas como 2G y 3G (UMTS) y otras LPWAN. (Es varias veces más rápido que NB-IoT). Y eso es más que suficiente para la mayoría de las aplicaciones de IoT. Es factible para aplicaciones con necesidades de datos pequeñas e incluso casos de uso que involucran transmisión de video.


En el contexto de IoT, el alto rendimiento de datos significa que los dispositivos que usan LTE-M pueden recibir fácilmente actualizaciones por aire (OTA), y las transmisiones de datos consumirán menos energía, porque el dispositivo puede volver al modo de ahorro de energía más rápido.


\end{itemize}
\end{itemize}
\subsubsection{Teorema de Shannon-Hartley}

Un sistema óptimo es el que cuenta con la capacidad de minimizar la probabilidad de error de bit a la salida del sistema, esto depende de las restricciones de la energía transmitida y del ancho de banda del canal\cite{Referencian9}.

El teorema de Shannon-Hartley establece la máxima cantidad de información que puede ser transmitida sin error con un ancho de banda específico y que está expuesto a la interferencia de ruido. La ecuación para la capacidad de canal es\cite{Referencian10}:


\begin{equation}C= B\cdot log (1+\frac{S}{N}) 
\end{equation}

Donde C es la capacidad de canal, es decir, la velocidad máxima a 
la que se puede transmitir la información a lo largo del canal sin error, medida en bits por 
segundo, B es el ancho de banda en hertz, S es la potencia de la señal útil en watts y N es la potencia de ruido presente en el canal expresada en watts. Al término S/N se le conoce como relación señal a ruido\cite{Referencian11}.

\subsubsection{Geolocalización}
La Geolocalización consiste en la identificación de la posición de un dispositivo móvil en 
el espacio real. El Sistema de Posicionamiento Global GPS por sus siglas en inglés es la forma más común y 
precisa en que se realiza la localización geográfica, y es capaz de ubicar el aparato con 
una precisión de unos pocos metros.
El GPS es una red satelital que cuenta con al menos 30 satélites y que se mantienen en órbita alrededor de la tierra. Si bien el sistema en sus inicios tenía un propósito militar, en la actualidad cualquier persona puede ocuparlo\cite{Referencian12}.

\subsubsection{Funcionamiento}
Cuando se solicita el posicionamiento por medio del GPS este envía señales de radio que permiten localizar a los satélites, el centro de comando transmite la información de la órbita, el tiempo y la posición de los otros satélites en el mismo sistema GPS. Estos satélites envían simultáneamente la información de tiempo y órbita a la tierra y finaliza cuando el dispositivo GPS utiliza la información recibida para determinar su localización la cual se interpreta mayormente en dos conjuntos: la latitud y longitud\cite{Referencian13}.




\newpage
\subsection{Estado del Arte}

\subsubsection{\emph{Driver Drowsiness Detection Using Machine Learning with Visual Behaviour}}
Este trabajo de investigación realizado por el \emph{International Journal of Creative Research Thoughts} propone un sistema de detección de signos de somnolencia en conductores utilizando un modelo de Red Neuronal Convolucional para detectar la posición de los ojos, y OpenCV junto con Dlib para la detección de la boca y realizar el conteo del número de bostezos por minuto. Para alimetnar a la red Neuronal, se utilizaron el conjunto de datos de NTHU-DDD. También fue utilizado el método PERCLOS para obtener el número de parpadeos del sujeto de estudio. Este trabajo concluye que las mayores dificultades a la hora de detección de rostros fueron el uso de gafas oscuras, así como cambios en la iluminación. 

\subsubsection{\emph{Detection Of Drowsiness And Distraction Of Drivers Using CNN}}

En este trabajo realizado por los estudiantes de la Universidad de Mumbai, se implementó el aprendizaje automático y el paquete Keras para construir un modelo de CNN, el cual, clasifica si el conductor se encuentra somnoliento o distraído,el sistema emite un tono de alerta al detectar correctamente la somnolencia, dando al conductor una alerta temprana. Se utilizó el clasificador Open CV Haar-Cascade,un clasificador en cascada basado en características, usando sus funciones integradas, se detetó el rostro y la región de los ojos.

% https://www.trendytechjournals.com/files/issues/volume4/issue7-5.pdf

\subsubsection{\emph{Driver Drowsiness Detection System Using Convolutional Neural Networks}}
En este trabajo realizado en la Universidad Anurag en el año 2022 se presenta una forma de analizar y anticipar la somnolencia del conductor mediante la aplicación de una red neuronal convolucional sobre la cara del conductor de un marco de secuencia. Se uso un conjunto de datos para dar forma y aprobar el modelo, usando redes convolucionales 3D basadas en modelos de múltiples capas de arquitectura de red neuronal repetitiva para detectar la somnolencia del conductor. Tras una sesión de entrenamiento, se obtuvo una precisión que se acerca al 92\% de aceptación.

% https://ijarsct.co.in/Paper3399.pdf

\subsubsection{Diseño e implementación de sistema de visión artificial para alerta y detección de somnolencia mediante aprendizaje profundo aplicable en conductores de vehículos}
En este trabajo realizado en la facultad de Ingeniería de la Universidad Nacional de Trujillo, se desarrolló un sistema de extracción de características faciales tales como pestañeo, cabeceo y bostezos. Para la extracción de regiones de interés se utilizaron cascadas Haar, y la clasificación de estas características se realizó utilizando un modelo de red LeNet. Además el trabajo incluye la creación de una base de datos de las regiones de interés de la cara utilizando imágenes propias y también utilizando conjunto de datos externos. Para el desarrollo de este trabajo se utilizó el lenguaje de programación Python, junto con las librerías de OpenCV, Tensorflow y Keras. 

\subsubsection{Sistema de detección de somnolencia mediante inteligencia artificial en conductores de vehículos para alertar la ocurrencia de accidentes de tránsito}

Este proyecto fue realizado por estudiantes de la Escuela Profesional de Ingeniería de Perú y consistió en llevar a cabo un sistema para la detección de la somnolencia y la distracción del conductor. El sistema se desarrolló utilizando C\# con EmguCV para detectar la distracción y orientación de los ojos utilizando técnicas de visión artificial. Además, cuenta con un sistema de alarma compuesto por un zumbador de 12v, que se activa a recibir la orden el microcontrolador al procesar el sistema de visión artificial junto a una red neuronal.[12] 

\subsubsection{Diseño de un sistema electrónico para detectar la somnolencia en automovilistas por medio de la actividad ocular}
Este trabajo realizado por alumnos de la ESIME Culhuacán en el año 2019 detalla el diseño y la implementación de un sistema que se basa en la fusión de dos señales. Una de ellas proviene de la detección del estado de los ojos utilizando información proveniente de una cámara digital. Para lo anterior, se realiza una segmentación de las regiones de la piel y posteriormente se obtiene la ubicación y el rastero de los ojos. La segunda señal se obtiene a partir de los datos proveniente de un acelerómetro colocado sobre la cabeza del conductor, cuya función es detectar los cabeceos asociados con somnolencia. El procesamiento de dicha señal del acelerómetro se lleva a cabo con la ayuda de la Transformada Wavelet Discreta. Estas dos señales son correlacionadas para tener como salida dos alarmas secuenciales que son percibidas por el conductor. La primera le alerta sobre un primer estado de posible somnolencia y la segunda acciona un control difuso para el control momentáneo del auto y la corrección del volante para el seguimiento del carril. Los resultados obtenidos por este trabajo demuestran una eficacia para la detección de ojos cerrados del 86\% y para la detección de cabeceo superior al 90\%.


\subsubsection{Sistema para la detección del estado de somnolencia en seres humanos, con reconocimiento de patrones }

En este artículo se muestra la implementación de un sistema de detección del estado de somnolencia en
seres humanos, a través de la identificación de patrones faciales y la frecuencia de parpadeo de los ojos. Utilizando técnicas de inteligencia artificial, visión por computadora y un sistema embebido con cámara integrada para la adquisición de imágenes.El cual permite detectar en tiempo real el estado de fatiga de un conductor automovilístico y su grado de somnolencia, todo con el objetivo de disminuir la tasa de accidentes viales causados precisamente por la somnolencia en México. Se hizo uso del lenguaje de programación Python, bibliotecas como OpenCV, Dlib y Scipy, las cuales, fueron requeridas debido a los modelos predefinidos que
establecen una mayor precisión en la detección de puntos faciales específicos, utilizando como referencia el método de predicción de 68 puntos específicos del rostro. El sistema propuesto tiene la característica de funcionar con luz de día en una primera etapa, y la idea es poder implementarlo en cualquier tipo de vehículo automotriz a un costo accesible a la mayoría de los propietarios de vehículos automotrices.

%https://uptexcoco.edomex.gob.mx/sites/uptexcoco.edomex.gob.mx/files/files/2020/articulos-Tesis/sistema_somnolencia.pdf

\subsubsection{Sistema de Detección de Somnolencia}
En este trabajo de fin de grado, realizado por un alumno de la Universidad de La Laguna en el año 2022 se estudió el uso de los modelos de Redes Neuronales para la clasificación de imágenes. Enfocado en la resolución del problema de la somnolencia en los conductores. En el cual se utilizó el lenguaje de programación Python, junto con diversas librerías que facilitan la integración del modelo, y otras que ayudan en la captura de las imágenes. 

%https://riull.ull.es/xmlui/bitstream/handle/915/30312/Sistema%20de%20deteccion%20de%20somnolencia.pdf?sequence=1&isAllowed=y


\subsubsection{Desarrollar un prototipo de reconocimiento facial basado en Machine Learning para detectar estado de Somnolencia en conductores de una cooperativa de transporte. }

En este trabajo, realizado por alumnos de la Universidad de GUAYAQUIL en el año 2020-2021 se plantea el desarrollo un prototipo para la detección de la somnolencia del conductor de una cooperativa de transporte el cual dicho conductor se había sobrepasado el límite de horas de trabajo, usando la técnica de reconocimiento facial, basándose específicamente en el estado de los ojos. Para ello se realizó una investigación bibliográfica relacionada con patrones biométricos, inteligencia artificial y programación mediante Machine Learning, así como, las principales variables que permiten identificar un estado de somnolencia. Dentro de esta investigación también se determinan cuáles son los algoritmos a utilizar (CV2, Imutils, etc.) siendo la herramienta Python y su librería principal Visión por Computadora las seleccionadas para el estudio. [16] 


\subsubsection{Sistema basado en la detección y notificación de somnolencia en conductores de autos }
En este trabajo, realizado por alumnos de la Universidad de Córdoba en el año 2015 se plantea el desarrollo que permite alertar a los conductores en estado de somnolencia leve, utilizando la tecnología de reconocimiento de objetos de Kinect y la librería OpenCV con el lenguaje C\# para el reconocimiento de imágenes. Además, se diseña una aplicación móvil del sistema operativo Android para la notificación de somnolencia utilizando una conexión socket tipo TCP. Para el procesamiento de imágenes, se utilizó el algoritmo Viola-Jones, el cual se basa en una nueva forma de representación de imágenes llamada ?Integral Image?, permitiendo que las características del detector se conmuten rápidamente. [13]



\subsubsection{Detección de somnolencia para conducción sin accidentes}
En este trabajo de fin de grado, realizado por un alumno de la Universidad de Alicante en el año 2022 se propuso crear una aplicación real para detectar la somnolencia al volante haciendo énfasis a un bajo coste económico. Donde se realizó una comparativa entre una solución mediante Machine Learning (ML) y Principal Component Analysis (PCA).

%http://hdl.handle.net/10045/124695


\subsubsection{Implementación de un sistema web con geolocalización para medir la transaccionalidad del portal ABC de la democracia para el consejo nacional electoral (CNE)}
En este proyecto de titulación de la Universidad de Guayaquil del año 2016, se 
implementa un sistema de geolocalización para poder tener una mejor visión a través 
de mapas virtuales de las personas y de las zonas geográficas de los productos o 
servicios que se quieran introducir, apoyado en un cien por ciento de las 
herramientas que Google Maps ofrece, se utilizó una aplicación popular y gratuita 
para poder analizar los datos obtenidos con la localización, Google Analytics. En este 
proyecto, sólo se pretendía visualizar mapas en la web, por lo que sólo fue necesario 
usar los servicios que ofrece Google Maps por ser una aplicación gratuita con la 
ayuda del api Javascript de Google Maps, se tuvieron en cuenta las limitaciones con 
respecto al código libre, pero estás no afectaron el desempeño del sistema; los datos 
obtenidos se recopilaban en una base de datos en MySQL.

\subsubsection{Diseño e implementación de un sistema de geolocalización en interiores para plataforma Android vía la red enterprise WLAN de la PUCP}
En este proyecto de titulación de la Pontifica Universidad Católica Del 
Perú del 2016 se desarrolló una aplicación móvil capaz de geolocalizar a un usuario 
dentro de las instalaciones de la universidad usando la técnica de Huellas de Señal 
(fingerprinting), que minimiza el error debido a reflexiones y obstáculos, basada en 
el estimador de máxima verosimilitud (ML por sus siglas en inglés Maximum 
Likehood) junto a las mediciones de señal de los Access Points cercanos usando la 
red Wi-Fi. La tecnología de radiofrecuencia que se usó fue la de redes inalámbricas 
de área local, Wi-Fi. Que ofrece conectividad por radiofrecuencia, con alcance local a 
un dispositivo que envíe datos Ethernet desde la ubicación del mismo hasta una 
conexión a la red fija, que en este caso la universidad contaba con 32 access points 
que recibirían la señal de datos a través de cobre o fibra. La técnica del fingerprinting, 
que está dirigida a geolocalización en interiores, consiste en un mapeo de datos que 
se encuentran en un escenario para luego asociarlos a una localización y 
almacenarlos en una base de datos, para estimar la localización más probable se 
utilizó el algoritmo de ML basado en el teorema de Bayes de probabilidad. En las 
conclusiones señalan que este sistema obtuvo una precisión del 100\% en la 
estimación del ambiente con un error menor de 2.4m en las pruebas realizadas.

\subsubsection{Geolocalización con LoRa mediante multilateración}
En esta tesis de la Universidad de la República de Uruguay del 2018 se desarrolló 
un prototipo para la geolocalización animal en estudios de comportamiento. Para la 
geolocalización se usó una tecnología nueva emergente llamada LoRa, tecnología de 
radiofrecuencia de bajo consumo energético y largo alcance; usando un método de 
multilateración para la geolocalización, técnica de navegación basada en la medición 
de la diferencia de distancia a dos estaciones en posiciones conocidas, el proyecto se 
conformó por tres puntos fijos o access points y nodos, que son los dispositivos 
llevados por los animales de radio frecuencia. Los nodos envían señales de radio 
frecuencia cada cierto tiempo, la señal emitida se recibe por los puntos fijos que, a 
su vez, esa señal genera metadatos que se almacenan en una base de datos para 
posteriormente realizar los cálculos en Geolocator , sistema de geolocalización 
desarrollado en Python, y así, obtener la posición geográfica del nodo. Se concluyó 
que el uso de LoRa para la geolocalización tiene gran potencial y que el alcance de 
las señales fue eficiente, de igual manera se trata de una tecnología de bajo consumo 
y que mantuvo los dispositivos con energía por meses.

\subsubsection{Propuesta de un sistema de geolocalización y monitoreo vía GPS/GSM/GPRS aplicado a un pulsómetro para personas con enfermedades cardiovasculares}
Tesis del Instituto Politécnico Nacional de la Escuela Superior de Ingeniería Mecánica 
y Eléctrica Unidad Zacatenco del año 2018, donde se empleó un sensor de pulso 
cardiaco el cual proporciona información en tiempo real de los latidos del corazón
mientras que un microcontrolador procesa los datos y, en caso de que se obtengan 
los datos de que se está presentando una taquicardia, el microcontrolador solicita la 
ubicación al módulo GPS y envía un mensaje de texto a través de GSM/GPRS a la 
persona designada.

\subsubsection{Influencia de un sistema de geolocalización en el control y monitoreo de vehículos con dispositivos GPS en una empresa logística}
Tesis del año 2015 de la Universidad César Vallejo de Perú donde se investiga de manera profunda las características y detalles de la tecnología GPS para determinar la influencia de un sistema de geolocalización en el control y monitoreo de vehículos con esta tecnología en una empresa logística. 

\subsubsection{Diseño de la red de acceso LTE en el distrito de Jesús María}
Tesis del año 2017 de la Pontifica Universidad Católica del Perú que tiene por objetivo analizar y diseñar una red usando la tecnología LTE, al desarrollar el proyecto se conocen las ventajas y desventajas de usar esta red así como la posibilidad de implementarla, también se realizan los cálculos de las coberturas y se dan a conocer las velocidades de enlace y el uso de diversos anchos de banda para su despliegue.

\newpage
\section{Capítulo III: Análisis}

Partiendo de la propuesta de solución y la metodología \emph{Top-down}, que nos permite dividir un sistema en módulos para un análisis por partes, el sistema se dividirá en tres principales módulos: el Módulo de Comunicaciones, el Módulo Central de Procesamiento y el Módulo de la Estación Base.  

\begin{center}
  \includegraphics[scale=0.4]{imagenes/topdowngeneral}
\captionof{figure}{top-down}
 \label{fig:topdown}
\end{center} 

A continuación, se desglosan cada uno de los módulos: \\

\textbf{Módulo Central de Procesamiento:}\\

El módulo Central de procesamiento estará compuesto por un microordenador que será colocado dentro de un automóvil. Este microordenador será alimentado por el corriente proporcionado por dicho automóvil. Además, contará con una cámara digital que analizará el rostro del conductor después de que este encienda el automóvil. A este microordenador también le será acoplado un dispositivo que sea capaz de utilizar redes de telecomunicaciones móviles, esto para que sea posible la conexión con la Estación Base. Finalmente, también contará con una alarma para alertar al conductor si este presenta un estado de somnolencia. \\

\textbf{Submódulo de Visión Artificial:}\\

Este submódulo se hará cargo de analizar el rostro del conductor utilizando técnicas de visión artificial. Se tomarán en cuenta los siguientes parámetros para determinar si el conductor presenta o no signos de somnolencia: estado de los ojos (cerrados, abiertos) y estado de la boca (cerrada o abierta). \\

Si el conductor presenta un estado de ojos cerrador por más de 5 segundos, se considerará como un estado de somnolencia, por lo que se activará una alarma para alertar al conductor. A su vez el sistema tomará un videoclip de por lo menos 10 segundos dónde se aprecie el momento en que el conductor presentó un estado de somnolencia. \\

\textbf{Módulo de Comunicaciones}\\

Una vez que se tengan los datos recibidos por el módulo de procesamiento, este módulo se encargará de la transmisión de los datos hacia el módulo de estación base por medio de la tecnología  4G/LTE. \\ 

El proceso que tiene el módulo es el siguiente, la información recibida por el módulo de procesamiento se enviará en forma de paquetes hacia las antenas 4G y ser subidas a la nube para después ser descargadas o consultadas por el módulo base y ser verificadas por la persona que realiza la gestión del sitio. La tasa de datos con la que el transceptor funcionará se especifica en la sección (**)  y se cumplirán los parámetros establecidos en el teorema de Shannon-Hartley para garantizar la probabilidad de error en la transmisión. En caso de no contar con cobertura, quedarán almacenados las incidencias en una unidad externa para que puedan seguir los mismos pasos antes mencionados teniendo en cuenta el retraso de estos una vez que esta se restablezca. \\

 
\textbf{Módulo de Estación Base}\\

Este módulo estará compuesto por una aplicación web y una base de datos que se encargará de almacenar las incidencias de los conductores para ser corroborados por un administrador posteriormente, esto con la intención de descartar un falso positivo y realizar los ajustes necesarios al sistema. 


\subsection{Análisis y elección de la zona geográfica  }
El sistema está dirigido principalmente para empresas cuya actividad esté enfocada al transporte de material o personas. Ya que una parte fundamental del proyecto es la portabilidad, el sistema requiere de un servicio de acceso al internet. Debido a lo anterior, se decidió utilizar redes móviles celulares para cumplir lo anterior.  

\begin{center}
  \includegraphics[scale=0.5]{imagenes/MapaCoberturaMexico}
\captionof{figure}{Mapa de cobertura 3G/4G/5G, México.\cite{CoberturaNacional}}  
 \label{fig:mapacoberturaN}
\end{center} 

Tomando en cuenta la información del Mapa de cobertura 3G/4G/5G, de redes móviles en México, mostrado en la figura 9, se observa que las zonas con mayor cobertura son principalmente las que cuentan con mayor densidad de población, por tanto, se plantea que su funcionamiento sea principalmente en la Ciudad de México, debido a que cuenta con mayor infraestructura en dichas redes (figura 10).  

\begin{center}
  \includegraphics[scale=0.9]{imagenes/CoberturaCDMX}
\captionof{figure}{Mapa de cobertura 3G/4G/5G, Ciudad de México.\cite{CoberturaNacional}}
 \label{fig:mapacoberturaCDMX}
\end{center}


\subsection{Análisis y elección del microordenador}
\subsection{Análisis y elección de algoritmos de aprendizaje supervisado, no supervisado y aprendizaje profundo }
Dentro del aprendizaje automático se encuentran diferentes tipos de algoritmos, como el aprendizaje supervisado y no supervisado. \\

El aprendizaje supervisado utiliza conjuntos de datos etiquetados (aquellos datos para los que ya se conoce la respuesta de destino) que entrenan algoritmos para la clasificación de datos o predecir salidas con precisión, este puede agruparse en dos tipos fundamentales: clasificación y regresión, el primero ordena los datos en segmentos específicos, algunos de estos algoritmos de clasificación son: regresión logística, k vecinos más cercanos, bosque aleatorio, clasificador bayesiano simple, descenso de gradiente estocástico y árboles de decisión. Mientras que la regresión mide la relación entre una variable dependiente y una o más variables independientes mediante un método estadístico, permitiendo hacer predicciones de causa y efecto basadas en diversos datos. Algunos algoritmos de regresión comunes incluyen regresión de Ridge, Lasso, regresión de redes neuronales y regresión logística. \cite{algoritmosdeaprendizaje} \\

El Aprendizaje no supervisado se utilizan algoritmos para examinar y agrupar los conjuntos de datos no etiquetados. Dichos algoritmos pueden descubrir patrones desconocidos en los datos sin supervisión humana.  Existen tres categorías principales de algoritmos: Agrupación de clústeres, el cual, según las similitudes o diferencias, los datos no etiquetados se clasifican mediante técnicas de agrupación de clústeres. Asociación, el cual permite identificar las relaciones de las variables dentro de un conjunto de datos y finalmente Reducción de dimensionalidad, el cual se usa en el caso de que un conjunto de datos contiene un conjunto de características inusualmente alto, ayudando a cotar este número sin comprometer la integridad de los datos.  \cite{algoritmosdeaprendizaje} \\

Dado que el problema a resolver se trata de una clasificación en imágenes, existen algoritmos como la cascada de clasificadores \emph{boosting}, que nos permiten detectar el rostro de un apersona, el cual consiste en tomar serie de clasificadores débiles y combinarlos para construir un clasificador fuerte con la precisión deseada. Por tanto, es necesario realizar un proceso de entrenamiento supervisado para crear la cascada de clasificadores. Este proceso se realiza mediante un algoritmo basado en AdaBoost, un meta-algoritmo adaptativo del aprendizaje supervisado cuyo nombre es una abreviatura de \emph{adaptative boosting}. Adaboost es un procedimiento efectivo para buscar un numero pequeño de buenas características que no tienen una variación significante y que nos permitirá realizar la detección de rostro y características faciales, como los ojos y la boca dentro de una imagen. \cite{filtroshaar} \\

Por otro lado, se tiene el aprendizaje profundo, el cual es un subgrupo del aprendizaje automático donde las redes neuronales artificiales aprenden de grandes cantidades de datos. Las redes neuronales son algoritmos modelados de la forma en que funciona el cerebro humano. El entrenamiento con grandes cantidades de datos es lo que configura las neuronas en la red neuronal dando como resultado un modelo de aprendizaje profundo que, una vez entrenado, procesa nuevos datos \cite{aprendizajeprofundo}.  Dentro de estas redes neuronales podemos encontrar las siguientes: \\

\begin{table}[]
\begin{tabular}{{|m{0.1\linewidth}|m{0.25\linewidth}|m{0.25\linewidth}|m{0.25\linewidth}|}}
\hline
\emph{Aplicaciones}  & \emph{Ventajas} & \emph{Desventajas}  & \emph{} \\ \hline
\emph{Neural Networks (CNNs)} & Se utiliza principalmente en las tareas de reconocimiento de imágenes y detección de objetos. Además de sistemas de recomendación y tareas de procesamiento de lenguaje.   & los resultados son más precisos, especialmente para los casos de uso de reconocimiento de imágenes/objetos, en comparación con otros algoritmos  & ara entrenarla se requiere una potencia de cálculo muy alta. Por lo tanto, no es muy rentable. \\ \hline
\emph{Long Short-Term Memory Networks} & Ideal para tareas como autocompletado de oraciones, generación de subtítulos y análisis de cuadros de video.  & Puede manejar la información en la memoria durante un largo período de tiempo en comparación con RNN.  & Se requiere una gran cantidad de computación y recursos para entrenar el modelo. \\ \hline
\emph{General Adversarial Networks (GANs)} & Utilizado en la industria creativa para la generación de objetos 3D. 

Útil en la edición de imágenes (Deepfake), generación de personajes de dibujos animados, ilustraciones para novelas, artículos, etc.  & Capaz de aprender la representación interna (distribuciones desordenadas y complejas) en cualquier dato.  & Cuando genera nuevos datos a partir de datos originales, no hay métrica de evaluación para juzgar la precisión de la salida. 

Se requiere mucho cómputo y tiempo para el entrenamiento del modelo  \\ \hline
\emph{Recurrent Neural Networks (RNNs) } & Se utiliza principalmente en los campos del procesamiento del lenguaje natural y el reconocimiento de voz. También es ideal para tareas como autocompletado de palabras, reconocimiento de texto y análisis de cuadros de video.  & Capacidad de recordar información a lo largo del período de entrenamiento. Posibilidad de procesar entradas de cualquier longitud   & Los cálculos requieren mucho tiempo debido a su naturaleza recurrente. 

Dificultad de acceder a la información desde hace mucho tiempo.  \\ \hline
\emph{Multilayer Perceptron?s (MLP?s)} & Problemas de clasificación.  

Voz, reconocimiento de imágenes y compresión de datos.  & Puede distinguir datos que no son linealmente separables. 

No hace ninguna suposición con respecto a las funciones de densidad de probabilidad  & Al actualizar los pesos en capas, la red puede atascarse en un mínimo local que puede dificultar la precisión.  \\ \hline

\end{tabular}
\end{table}

Debido a que el presente proyecto se basará en el reconocimiento de imágenes y de clasificación de información, se tomó la de decisión de utilizar una CNN o Red Neuronal Convolucional para el reconocimiento de ojos abiertos o cerrados dentro de la imagen, esta aprende directamente de los datos, sin necesidad de extraer características manualmente.  Estas redes son particularmente útiles para encontrar patrones en imágenes para reconocer objetos, caras y escenas, además de permitir su implementación en video en tiempo real, lo cual es indispensable para el presente proyecto.  

\subsection{Análisis y elección de la cámara digital  }

Para la búsqueda de modelos de cámaras digitales, se buscó que la compatibilidad con la Raspberry Pi debido a que el sistema será alojado en este micrordenador.  

Se optó por utilizar la Rasperry Camera Module V2, ya que cuenta con hasta 8 Megapixeles de resolución, además de tener distintos los formatos de salida jpg, RAW, DNG O MP4. También cuenta con diferentes resoluciones de video que van desde 1080p hasta 480p a 30 cuadros por segundo. 

\begin{center}
  \includegraphics[scale=0.5]{imagenes/V2}
\captionof{figure}{Rasperry Camera Module V2}
 \label{fig:CameraModuleV2}
\end{center}

\subsection{Análisis y elección de la alarma }

Dentro de la búsqueda de modelos de alarma se encontraron dos tipos de zumbadores, el zumbador activo y zumbador pasivo, donde el primero produce un tono audible fijo, al aplicar una tensión de corriente directa. Mientras que el segundo requiere de una señal oscilante, generalmente de tipo PWM, que indique la frecuencia y la duración de la señal.  \\

Para la elección de la alarma se obtuvieron dos de los principales modelos comerciales de cada tipo de zumbador mencionado: 

\textbf{Buzzer Pasivo KY-006}

\begin{itemize}
\item Voltaje: 1.5 V - 5 V 
\item Rango de frecuencia: 1.5 Hz - 2.5kHz 
\item Decibeles: 72 DB
\item Precio: \$50 
\end{itemize}

\textbf{Buzzer Activo KY-012  }

\begin{itemize}
\item Voltaje: 3.5 V ? 5.5 V 
\item Rango de frecuencia: 300 Hz - 2.5kHz
\item Decibeles: 85 DB
\item Precio: \$71 
\end{itemize}

Debido a la posibilidad que ofrece el zumbador pasivo para controlar el tono y la duración del mismo, además de su bajo coste en comparación con el zumbador activo KY-012, se optó por el zumbador de tipo pasivo, específicamente el modelo KY-006, en cual se pueden configurar los tonos desde la Raspberry Pi por medio del lenguaje Python.   

\subsection{Análisis y elección de la unidad de almacenamiento externa}

Para la elección de la unidad de almacenamiento se consideró que la Raspberry requiere de una microSD de al menos 8GB de almacenamiento externo para la instalación del sistema operativo Raspbian oficial y tomando en cuenta que el tamaño compatible predeterminado más grande de Raspberry Pi es de 32GB, sin embargo, se puede formatear en caso de requerir capacidades más altas para que funcionen con las unidades.  

\begin{table}[]
\begin{tabular}{|l|l|l|l|l|l|l|}
\hline

Micro SD  & Almacenamiento  & Speed class  & Video class  & Velocidad de escritura  & Velocidad de Lectura  & Precio \\ \hline
SanDisk Extreme A2 & 32-256 (MAX 1T)GB  & Clase 30/U3  & V30 & 90 MB/s  & 160 MB/s  & \$1041  \\ \hline
Kingston ENDURANCE  & 32-256 (MAX 1T)GB  & Clase 10/U1   & - & 45 MB/s  & 95 MB/s  & \$628  \\ \hline
Samsung PRO Plus  & 128-512 GB  & Clase 10/U3   & V30  & 120 MB/s  & 160 MB/s  & 160 MB/s \$883 (128) \\ \hline
Kingston Canvas React Plus V90 Card  & 64-256 GB  & Clase 10/U3  & V90  & 90 MB/s  & 180 MB/s  & \$3596 \\ \hline

\end{tabular}
\end{table}

Tomando en cuenta lo anterior se decidió usar una unidad de almacenamiento \emph{Kingston ENDURANCE} de 32 GB para el almacenamiento externo.   

\subsection{Análisis y elección de lenguajes de programación para el microordenador}

Lo que se debe de considerasr para la elección de un lenguaje de programación, es que la programación orientada a la inteligencia artificial es diferente al paradigma de la programación convencional. En esta última, el usuario le indica a la máquina exactamente lo que tiene que hacer, mientras que en Machine learning, se le enseña a programarse sola. Lo cúal se ejemplifica en el siguiente gráfico:
\\
\begin{center}
  \includegraphics[scale=0.3]{imagenes/programaclasico}
\captionof{figure}{Programa clásico vs Machine Learning}
 \label{fig:pcvsml}
\end{center}


El proceso de trabajo para aprendizaje automático es muy diferente a la construcción de una aplicación convencional. Por este motivo, la manera de utilizar los lenguajes de programación es diferente. Se deben de tomar en cuenta las características que estos utilizan, así como sus enfoques y paradigmas.\\

Uno de los factores importantes a considerar al momento de elegir un lenguaje de programación orientado a machine learning, es la popularidad el mismo, ya que esta es una señal de la aceptación por parte de la comunidad. A su vez, su el soporte es tanto o mas importante, ya que podemos darnos una idea si dicho lenguaje posee las herramientas adecuadas que se acoplan a nuestras necesidades. La velocidad de ejecución es otro factor importante, sobre todo cuando se requiere una minusiocidad en la ejecución de procesos y el cuidado de la memoria .Finalmente, la versatilidad del lenguaje es otro factor relevante, ya que, si el lenguaje fue diseñado con una determinada tarea o propósito en mente, este será mucho más eficiente y productivo.\\

A continuación, se listan algunos de los lenguajes de programación más populares en el campo de machine learning:\\

\begin{itemize}
\item \textbf{Python} \\
Python se ha convertido en el lenguaje de programación más popular del mundo, esto gracias a su sencillez aunado a una gran versatilidad. Sus utilidades abarcan desde desarrollo web, hasta la inteligencia artificial.
Python es uno de los lenguajes más naturales y  con sintaxis menos complicada. Por lo tanto, es fácil de aprender, leer y corregir errores. Lo mejor de todo es que Python es un lenguaje de código abierto. Lo que significa que es de libre acceso y distribución. Como resultado, tiene bibliotecas versátiles.

Una biblioteca es una colección de módulos o códigos creados para realizar operaciones específicas. Algunos módulos pueden ayudar con la interfaz gráfica de usuario, análisis de datos, gráficos, entre otras cosas. En lugar de escribir el mismo código cada vez que lo necesite, puede importarlo desde la biblioteca.


 Uno de los principales factores de esta popularidad, es el enorme ecosistema de herramientas desarrolladas específicamente para machine learning tales como: Pandas, Numpy, Tensorflow, Keras, entre otras.
A pesar de no ser el lenguaje más rápido o potente, lo anterior lo hace uno de los lenguajes indispensables si se piensa trabajar en el campo de machine learning.

\item \textbf{C++}\\

A menudo hemos escuchado que C++ se aborda más cuando se trata de desarrollar juegos y sistemas grandes. Esto se debe a su característica de portabilidad y también proporciona una comprensión básica de la construcción lógica. Sin embargo, Algunos de los paquetes compatibles con C++ incluyen: Microsoft Cognitive Toolkit (CNTK) para aprendizaje profundo; Tensorflow para aprendizaje profundo; OpenCV para visión artificial; MLPack para aprendizaje automático; DyNet para redes neuronales; OpenNN para redes neuronales; Shogun para aprendizaje automático y FANN para redes neuronales.\\
Sin embargo, C++ también tiene sus propias deficiencias. Está muy orientado a la sintaxis, a diferencia de Python, que es realmente amigable para los principiantes. Adempas de no contar con un gran soporte de bibliotecas.

\item \textbf{R}\\

Otro de los lenguajes de programación cuyo uso es considerablemente popular en el ámbito de machine learning y data análisis es R. R ofrece una variedad de beneficios desde su buen soporte de biblioteca y gráficos hasta la posibilidad crecer enormemente con muchos de los que podemos buscar ayuda, debido a su naturaleza abierta.
Algunos de los paquetes clave compatibles con R son: Kernlab para operaciones basadas en regresión y clasificación; Ggplot para visualización de datos; Caret para operaciones basadas en regresión y clasificación; Plotly para visualización de datos; MLr3 para diferentes flujos de trabajo de aprendizaje automático.
al igual que Python, también es comparativamente más lento que el resto de los lenguajes. Esto representa una gran desventaja para este lenguaje de programación. Además de esto, también tiene un origen débil, por lo que no es tan fácil de aprender. Para las personas que no tienen experiencia en programación les puede resultar difícil aprender R.

\item \textbf{Matlab}\\

Matlab también admite operaciones de aprendizaje automático y se puede aplicar de manera innovadora a aplicaciones que incluyen visión por computadora. MATLAB no está limitado por la sintaxis y, por lo tanto, es fácil de aprender y comprender. MATLAB también tiene muchas funciones predefinidas y una GUI para que los alumnos entiendan mejor las cosas. Además, viene con un compilador MATLAB que ayuda cuando se trata de codificar en el mismo.
Además, cuando se trata de capacidades de aprendizaje automático, MATLAB lo admite de una manera única. MATLAB permite a los usuarios aplicar AutoML, lo que les permite aprovechar al máximo los modelos codificados optimizados y reducidos. Además, MATLAB también puede realizar la generación automática de código para el análisis de sensores y mucho más.
MATLAB también viene con algunas restricciones. El lenguaje de programación no está fácilmente disponible o es de uso gratuito. De hecho, una versión de prueba está disponible solo por 30 días y publica que los usuarios deben comprar el paquete para un uso posterior. Por esta razón, uno puede encontrar solo investigadores como su público objetivo. No solo eso, el compilador de MATLAB es costoso de comprar y, por lo tanto, no tiene un soporte de comunidad / foro denso para ayudar a los usuarios y estudiantes.


\item \textbf{Javascript}

JavaScript puede no ser el lenguaje principal para desarrollo en Inteligencia Artificial, pero es gran complemento para utilizar herramientas relacionadas con Machine Learning, especialmente visualización de datos o procesos.
Herramientas como TensorflowJs permiten el ofrece acceso a varios sensores, incluidas cámaras web y micrófonos, que pueden proporcionar imágenes y sonidos como entrada a cualquier modelo de aprendizaje automático.
A pesar de todos los aspectos positivos, TensorFlow.js no tiene acceso predeterminado al sistema de archivos en el entorno del host del navegador. Esto limita los recursos de datos disponibles y puede imponer restricciones en el tamaño de los archivos y procesos.\\




\end{itemize}

A continuación se presenta una tabla comparativa de las características que se tomaron en cuenta para la elección sobre que lenguaje utilizar.

\begin{table}[h]
\centering
\caption{\label{tab:lenguajes} Tabla Comparativa Lenguajes de Programación}
\begin{tabular}{|l|l|l|l|l|}
\hline
\textbf{Lenguaje} & \textbf{Popularidad} & \textbf{Versatilidad} & \textbf{Velocidad} & \textbf{Soporte} \\ \hline
Python            & Alta                 & Alta                  & Moderada           & Alta             \\ \hline
C++               & Baja                 & Alta                  & Alta               & Moderado         \\ \hline
R                 & Alta                 & Moderada                  & Moderado           & Bajo             \\ \hline
Matlab            & Baja                 & Moderada              & Moderada           & Bajo             \\ \hline
Javascript        & Moderada             & Moderada              & Baja               & Moderado         \\ \hline
\end{tabular}

\end{table}

Python es un lenguaje que permite trabajar con más de un paradigma (programación estructurada y orientada a objetos).
Normalmente cuando se programa un script sencillo, solo se el paradigma de programación estructurada (Secuencia, selección e iteración). Sin embargo cuando se requiere desarollar un proyecto  más complejo, es necesario incluir los beneficios del paradigma orientado a objetos (reutilización de los componentes, facilidad de mantenimiento y modificación de objetos) utilizamos clases (POO).\\
Debido a que en el presente proyecto se realizará la integración de sistemas enfocados a Machine Learning y a su vez a la programación orientada a objetos, Python representa la mejor opción para ser implementado, ya que este lenguaje permite desarrollar ambos ámbitos de una manera integral.Por lo cual será utilizado a lo largo del proyecto.




\subsection{Análisis y elección de protocolos de comunicación inalámbrica  }
Debido a que el presente proyecto tiene como parte fundamental la portabilidad y la transferencia de contenido multimedia, y habiendo definido que para su desarollo se utilizará un microordenador, se requiere una interfaz de comunicación inálmbrica con amplia cobertura. A continuación se muestra una comparación de los estándares de comunicación inalámbrica más utilizados enfocados a sistemas portátiles.

\begin{table}[h]
\caption{\label{tab:redes} Comparación entre Redes Inalámbricas}
\begin{tabular}{|l|l|l|l|l|l|l|}
\hline
        & Espectro                                                                 & \begin{tabular}[c]{@{}l@{}}Ancho de\\ Banda\end{tabular} & Costo    & \emph{BitRate} & Escalabilidad & \begin{tabular}[c]{@{}l@{}}Inmunidad a \\ la Interferencia\end{tabular} \\ \hline
LTE-M   & \begin{tabular}[c]{@{}l@{}}Sin licencia\\ 869 MHz\\ 915 MHz\end{tabular} & 100kHz                                                   & Moderado & 1Mbps   & Alta          & Moderada                                                                \\ \hline
NB-IoT  & \begin{tabular}[c]{@{}l@{}}Sin licencia\\ 433 MHz\end{tabular}           & \textless{}500kHz                                        & Moderado & 200kbps & Alta          & Baja                                                                    \\ \hline
SigFox  & \begin{tabular}[c]{@{}l@{}}Con licencia\\ 700-900 MHz\end{tabular}       & 200kHz                                                   & Bajo     & 100bps & Baja          & Baja                                                                    \\ \hline
LoraWan & \begin{tabular}[c]{@{}l@{}}Con licencia\\ 700-900 MHz\end{tabular}       & 1.4MHz                                                   & Bajo     & 10kbps  & Moderada      & Muy Alta                                                                \\ \hline
\end{tabular}

\end{table}

De la Tabla 1\ref{tab:redes} las interfaces de comunicación que mas destacan por su cobertura y su tasa de transferencia de datos son LTE-M y NB-IoT. A continuación se realiza una comparación entre estas interfaces para poder definir cual será utilizada a lo largo del proyecto.


\textbf{LTE-M}

Es una tecnología de área amplia de baja potencia que admite IoT a través de dispositivos poco complejos y proporciona una cobertura extendida, al tiempo que permite la reutilización de la base instalada de LTE\\

Las redes LTE-M coexisten con las redes móviles 2G, 3G y 4G y se beneficiaan de todas las características de seguridad y privacidad de las redes móviles, como la confidencialidad de la identidad del usuario, la autenticación de la entidad, la privacidad, la integridad de los datos y la identificación del equipo móvil.

A continuación se describen las ventajas principales de LTE-M

\begin{itemize}
\item \textbf{Ahorro de Energía}

LTE-M permite que los dispositivos en los que operan utilicen un modo de ahorro de energía. Consumiendo energía sólo cuando los dispositivos requiren su uso.

\item \textbf{Cobertura}


Las redes LTE-M/Cat-M1/Cat-M2 pueden utilizar la infraestructura 4G LTE existente. Esta es una ventaja significativa, ya que más del 50 por ciento de las conexiones móviles globales se realizan en redes 4G. 

Con una pérdida de acoplamiento máxima (MCL) de 156 decibelios (dB), 14 dB más alta que LTE, las redes LTE-M también ofrecen mayor cobertura y mejor penetración en interiores. La señal puede manejar muchas interferencias de edificios y otras estructuras que obstruyen su camino.

\item \textbf{Velocidad de Transferencia}

LTE-M cuenta con un estándar base de 1 megabit por segundo para transmisiones de enlace subida y descarga. Su uso es factible para aplicaciones con necesidades de  transmisión datos menores a los 50MBps e incluso casos de uso que involucran transmisión de contenido multimedia.


En el contexto de IoT, el alto rendimiento de datos significa que los dispositivos que usan LTE-M pueden recibir fácilmente actualizaciones por aire (OTA), y las transmisiones de datos consumirán menos energía, porque el dispositivo puede volver al modo de ahorro de energía más rápido.


\item \textbf{Costo}

Las redes 4G se construyeron principalmente para teléfonos inteligentes. Las redes LTE-M se construyeron principalmente para dispositivos IoT. Como tal, los componentes necesarios para los dispositivos LTE-M son menos complejos y más asequibles que los componentes que necesitaría para un dispositivo 4G tradicional, aunque ambos utilizan la infraestructura 4G LTE.




\end{itemize}

\textbf{NB-IoT}

Es un protocolo inalámbrico de Internet de las cosas (IoT) que también utiliza tecnología de red de área amplia de baja potencia (LPWAN). Fue desarrollado por 3GPP para comunicación inalámbrica celular que permite una amplia gama de nuevos dispositivos y servicios NB-IoT. NB-IoT es uno de los tres principales estándares 3GPP LPWAN.\\

El estándar de comunicación NB-IoT tiene como objetivo permitir que los dispositivos IoT funcionen a través de redes de operador, ya sea dentro de una onda portadora de comunicación del Sistema Global para Móviles (GSM) existente, en una "banda de protección" no utilizada entre canales LTE o de forma independiente.\\

Uno de los objetivos de NB-IoT es impulsar la extensión de la cobertura más allá de lo que ofrecen las tecnologías celulares existentes. Para ello, NB-IoT ofrece repeticiones de transmisión y diferentes configuraciones de asignación de ancho de banda en la transmisión de enlace ascendente.\\

La tecnología NB-IoT utiliza señales de bajo ancho de banda para comunicarse dentro de las tecnologías GSM y LTE existentes.

Los dispositivos y sensores especialmente diseñados son los componentes básicos de los sistemas NB-IoT. Estos dispositivos recopilan información de su entorno y la transmiten a estaciones base NB-IoT o nodos de transmisión.

Las estaciones base individuales están conectadas a una puerta de enlace de IoT y servidores de aplicaciones en la nube de IoT para el monitoreo centralizado y el análisis de datos.

NB-IoT emplea una nueva capa física con señales y canales para cumplir con los requisitos de cobertura extendida en áreas rurales e interiores profundos, al tiempo que permite una complejidad de dispositivo muy baja. La tecnología subyacente es mucho menos compleja que la de los módulos GSM/GPRS.\\

A continuación se describen las ventajas más importantes de NB-IoT:
\begin{itemize}

\item \textbf{ Ahorro de Energía}

NB-IoT no necesita ejecutar un sistema operativo pesado, y no require procesamiento de señales, lo que lo hace más eficiente en términos de energía en comparación con LTE-M.

\item \textbf{Cobertura}


NB-IoT puede ayudar a admitir una gran cantidad de dispositivos mediante el establecimiento de redes NB-IoT que pueden conectarse a miles de millones de nodos. Diseñado para cobertura extendida en interiores, la menor complejidad de los dispositivos proporciona conectividad y comunicación de largo alcance.

\item \textbf{Costo}

Debido a que es más fácil crear dispositivos con menor complejidad, el costo de los dispositivos es significativamente bajo, alrededor de 5 dolares por módulo.

\item \textbf{Seguridad}


NB-IoT está protegido de manera muy similar a 4G, incluidas todas las funciones de autenticación basadas en cifrado y SIM.

Comparado a NB-IoT las velocidades de transferencia de datos de LTE-M son más de 10 veces más rápidas, su latencia es de 10 a 100 veces menor y cuenta con una cobertura mucho mayor, ya que utiliza la infraestructura 4G LTE existente. Sin embargo, aunque ambas LPWAN funcionan bien en interiores, NB-IoT tiene una pérdida máxima de acoplamiento (MCL) ligeramente más alta, lo que significa que puede manejar un poco más de interferencia.

LTE-M también puede usar una gama más amplia de frecuencias, aunque, como su nombre lo indica, Narrowband-IoT usa bandas de frecuencia más estrechas, lo que permite que esta tecnología use el espectro de radiofrecuencia (RF) de manera más eficiente.

\begin{table}[h]
\begin{adjustbox}{width=\columnwidth,center}
\begin{tabular}{|l|l|l|l|l|l|}
\hline
       & \begin{tabular}[c]{@{}l@{}}Velocidad \\ Máxima de Subida\end{tabular} & \begin{tabular}[c]{@{}l@{}}Velocidad Máxima \\ de Descarga\end{tabular} & Latencia & \begin{tabular}[c]{@{}l@{}}Perdida Máxima\\ de Acoplamiento(dBs)\end{tabular} & Ancho de Banda \\ \hline
LTE-M  & 1Mbps                                                                 & 1Mps                                                                    & 10-15 ms & 156                                                                           & 1.4MHz a 5MHz  \\ \hline
NB-IoT & 127 kbit                                                              & 159 kbit                                                                & 1.6-10s  & 164                                                                           & 180KHz         \\ \hline
\end{tabular}
\end{adjustbox}
\caption{\label{tab:interfaces} Comparación entre LTE-M y NB-IoT}
\end{table}

Pocos operadores han establecido acuerdos de roaming para sus redes NB-IoT, por lo que LTE-M ofrece una mejor cobertura y tiene menos circunstancias en las que necesita cambiar de SIM.
Actualemente, la compañia Telcel cuenta con la mayor cobertura de tecnología LTE en México.

\begin{center}
  \includegraphics[scale=0.5]{imagenes/lte-mcobertura}
\captionof{figure}{Mapa de Cobertura LTE-Telcel}
 \label{fig:prot}
\end{center}
\newpage
\item\textbf{NB-IoT consume más energía en algunos casos}

Cuando los dispositivos necesitan transmitir grandes volúmenes de datos, las velocidades de datos más bajas de NB-IoT requieren estos permanezcan en línea por más tiempo, lo que resulta en un mayor consumo de energía. En casos de uso móvil, NB-IoT también usa más energía


\end{itemize}

Por lo anterior, se decidió a utilizar el estándar LTE-M para nuestro proyecto. 


\subsection{Análisis y elección del manejador de bases de datos  }
Debido a la escalabilidad horizontal, facilidad de implementación, bajo coste y flexibilidad que ofrece los gestores de bases de datos NoSQL para adaptarse a las necesidades del proyecto, se optó por la elección de un gestor de este tipo. Además, se contemplaron las posibles modificaciones dentro del modelado de la base de datos, las cuales tendrán como motivo, cumplir los requisitos del sistema y presentar la información necesaria en la aplicación web. Estas modificaciones (en caso de ser necesarias) podrán ser fácilmente aplicadas usando un SGBD NoSQL ya que ofrecen una mayor facilidad de realizar cambios dentro del esquema a diferencia de un SGBD SQL.  \\


\begin{table}[h]
\begin{tabular}{{|m{0.16\linewidth}|m{0.18\linewidth}|m{0.18\linewidth}|m{0.18\linewidth}|m{0.18\linewidth}|}}
\hline
 & \textbf{Cassandra } & \textbf{MongoDB } & \textbf{Redis } & \textbf{Amazon DynamoDB } \\ \hline
 \textbf{Tipo de base de datos }& NoSQL \emph{wide-column}  & NoSQL Orientado a documentos  & NoSQL clave-valor  & NoSQL clave-valor  \\ \hline
 \textbf{Licencia }& Codigo abierto  & Codigo abierto SSPL & Codigo abierto BSD 3-clause  & Vendor \\ \hline
 \textbf{Cumplimiento ACID }& No & Si  &  Si &  Si \\ \hline
 \textbf{Lenguaje de consulta principal }& CQL  & JavaScript  & Permite el uso de varios lenguajes  & DQL  \\ \hline
 \textbf{Principales casos de uso }& Análisis social, análisis en tiempo real, venta al por menor y mensajería & Gestión de IOT, análisis en tiempo real, desarrollo de aplicaciones, inventario y personalización & Almacenamiento en caché, colas, filtrado y estadísticas  & Juegos, comercio minorista, servicios financieros, publicidad y transmisión de medios  \\ \hline
 \textbf{Seguridad  }& Seguridad integrada para la autorización, el cifrado y la autenticación, pero la seguridad está desactivada de forma predeterminada para facilitar su uso dentro de los clústeres  & Seguridad incorporada para autorización, autenticación y encriptación  & Se inicia automáticamente en modo de protección y ofrece sugerencias de seguridad  & Seguridad integrada para datos y aplicaciones; software, hardware, instalaciones y red seguros del proveedor  \\ \hline
 \textbf{Escalabilidad }& Horizontal  & Horizontal  & Horizontal  & Horizontal  \\ \hline
 \textbf{Curva de aprendizaje  }& Difícil    & Medio   & Medio   &  - \\ \hline
\end{tabular}
\caption{Comparación de los Sistemas de Gestión de Bases de Datos No Relacionales}
\end{table}


Dentro de los SGBD NoSQL se eligió MongoDB, ya que la aplicación  como base el lenguaje JavaScript y  Node.js para realizar el \emph{backend} de la aplicación, por lo cual MongoDB complementa y facilita el desarrollo del proyecto en herramientas basados en JavaScript. Además, MongoDB es de código abierto, y es una herramienta gratuita hasta cierto punto, por lo cual no se requerirá una licencia para la implementación. Otra característica importante es que es una base de datos multiplataforma, esto para que se realice información desde el sistema operativo Linux, que será utilizado en la Rasperry Pi.

\subsection{Análisis y elección de lenguajes de programación web}

Con respecto al desarrollo web, se requiere un lenguaje de programación que pueda ofrecer felixbilidad e interoperabilidad para su futura implementación. El lenguaje de programación que cumple en estas características, es Javascript \cite{js}.


JavaScript (JS) es un lenguaje de programación ligero, interpretado, o compilado justo-a-tiempo (just-in-time) con funciones de primera clase. Si bien es más conocido como un lenguaje de scripting (secuencias de comandos) para páginas web, también es un lenguaje de programación basada en prototipos, multiparadigma, de un solo hilo, dinámico, con soporte para programación orientada a objetos, imperativa y declarativa

A continuación se describen sus características más importantes:

\begin{itemize}
\item \textbf{Veloz}

Como lenguaje de programación interpretado, no tiene que compilarse cada vez que se ejecuta, lo que hace que el desarrollo y la depuración sean más rápidos para comenzar. Además, JavaScript encuentra más velocidad al ejecutarse como un script del lado del cliente, ejecutándose en el navegador sin conectarse al servidor y ahorrando recursos valiosos para cada usuario adicional.

\item \textbf{Procesamiento asíncrono}

El procesamiento asíncrono es una de las características más útiles del lenguaje JavaScript. Usando JavaScript, un bloque del script no podrá detenerse o dejar que el otro bloque de código espere a que comience la respuesta. Si se está procesando una solicitud, otras también trabajarán en paralelo con la solicitud anterior en lugar de esperar la respuesta de la solicitud anterior. Ahorra mucho tiempo al ejecutar scripts en paralelo.

\item \textbf{Poca carga de Procesamiento del servidor}

JavaScript permite realizar funcionalidades básicas en el lado del cliente. Esto significa que el servidor no tendrá que procesar las funcionalidades básicas que mejoran el rendimiento del servidor.

\end{itemize}


\subsection{Análisis y elección del servidor de alojamiento  }
Para el presente proyecto se requiere una capacidad de almacenamiento que nos permita el uso de archivos multimedia, concretamente archivos de video.

\begin{table}[H]
\centering
\begin{tabular}{|l|l|}
\hline
\textbf{Tipo de Multimedia} & \textbf{Ejemplos}             \\ \hline
Imágenes                    & JPEG, GIF, PNG, Archivos TIFF \\ \hline
Audio                       & MP3, WAV, ACC                 \\ \hline
Video                       & QuickTime, MP4, Youtube       \\ \hline
\end{tabular}
\caption{Tipos de Archivo Multimedia}
\end{table}

Si se requiere alojar una aplicación web cuyo contenido predominante sea multimedia, se deberá de tomar en cuenta los siguientes factores:


\begin{itemize}
\item  Ancho de banda

El ancho de banda y el almacenamiento son una función de su plan de alojamiento. Generalmente un plan de alojamiento en la nube  permite pagar por un uso menor durante las horas de menor actividad y explotar cuando recibe mucho tráfico. No se paga por ancho de banda o espacio de almacenamiento que en realidad no se utiliza.

\item Almacenamiento

Si se tiene una gran cantidad de archivos multimedia, entonces se requiere gran capacidad de almacenamiento. Lo ideal sería contar con almacenamiento ilimitado, pero esto significaría un aumento considerable al costo de alojamiento. Se debe de analizar un aproximado de almacenamiento necesario y en base a eso se deberá elegir el plan de almacenamiento que mejor cubra esas necesidades.

\item CDN (\emph{Content Delivery Network})

Lo último que debe considerar con el alojamiento de medios es una red de entrega de contenido o CDN. Una CDN intenta mejorar el rendimiento de la transmisión de medios mediante la ubicación de servidores que están geográficamente cerca del usuario mediante sofisticados algoritmos de ubicación y de ruteo.

\end{itemize}

Sabiendo lo anterior, se procede a realizar el análisis de distintos proveedores de alojamiento con la propósito de seleccionar saber aquel que ofrezca la capadidad de alojar y almacenar contenido multimedia.

\begin{itemize}
\item AWS Amplify Hosting
AWS Amplify Hosting es un servicio de alojamiento e Integración Continua/Entrega Continua completamente administrado para aplicaciones estáticas, rápidas, seguras, fiables, renderizadas del lado del servidor y que escalan a la par. Algunas de sus principales ventajas son:

\begin{itemize}
\item \textbf{Implementación de contenido web con rapidez}

AWS permite la implementación continua de una aplicación web estática o renderizada del lado del servidor, una página de inicio de la aplicación móvil o una aplicación progresiva en cada confirmación de código.


\item \textbf{CDN}

Cuenta con la red de entrega de contenido (CDN) de Amazon CloudFront con cientos de puntos de presencia en todo el mundo. Lo que permite un tiempo de respuesta de hasta menos de 10ms.

\item \textbf{Monitoreo}

AWS cuenta con un sistema de monitoreo de tráfico en tiempo real. También permite crear alarmas personalizadas para enviar notificaciones cuando la métrica haya superado el límite establecido. 

\item \textbf{Precio}

AWS cuenta con dos planes, uno gratuito y otro de paga, a continuación, se detallan las características de cada uno.

\begin{center}
  \includegraphics[scale=.5]{imagenes/amplify}
\captionof{figure}{Planes de Alojamiento AWS Amplify}
 \label{fig:DiagramadeactividadMEB}
\end{center}

\item \textbf{A2Hosting}

\begin{itemize}
\item \textbf{Alojamiento Compartido}

A2 Hosting cuenta con dos tipos de planes de alojamiento, el primero con costo de renovación que  va desde \$10.99 dls . Si se llegara a necesitar un servidor dedicado, el plan que nos ofrece está característica tiene un precio de  \$25.99 por mes.

\item \textbf{VPS}

VPS significa servidor privado virtual por sus siglas en inglés. Es una forma de dividir un servidor en (sub)servidores individuales más pequeños. Esto significa que se puede configurar de acuerdo a las necesidades del cliente y no tener que compartir recursos con otros clientes. Un VPS en A2 Hosting cuesta desde tan solo \$7.65 al mes hasta alrededor de \$200 dependiendo del número de subdivisiones necesarias.

\item \textbf{CDN}
A2 Hosting no ofrece servicio de CDN, sin embargo, cualquiera de sus planes ofrecen la posibilidad de contratar un servicio de CDN proveedores externos pagando un precio extra del precio base dependiendo del plan contratado.

\end{itemize}


\item \textbf{HosGator}
\begin{itemize}

\item \textbf{Tiempo de Respuesta}

De acuerdo con el sitio Bitcatcha, que se dedica a evaluar los tiempos de respuestas de los servidores de páginas web, HostGator poseé tiempos de respuestas mínimos para el territorio de Estados Unidos. A continuación se muestra los tiempos de respuesta de distintos territorios:


\begin{center}
  \includegraphics[scale=.5]{imagenes/respuesta}
\captionof{figure}{Tiempos de Respuesta de servidores de HostGator}
 \label{fig:DiagramadeactividadMEB}
\end{center}

HostGator posee solo 2 datacenters, uno localizado en el área oeste, y otro en el este. Esto puede ocasionar que los tiempos de respuesta no sean los mejores en áreas que estén alejadas de las antes mencionadas


\item \textbf{Disponibilidad}
HosGator ofrece una disponibilidad del 99.9\%, esto quiere decir que los sitios que se decida alojar en los servidores de HostGator deberían ser accesibles la mayoría del tiempo.


\end{itemize}


\end{itemize}



\end{itemize}


Después de haber analizado los distintos proveedores de alojamiento así como sus características, se llegó a la conclusión de utilizar AWS Amplify. Ya que este contiene una suite de herramientas que facilitan la implementación de una aplicación web, como por ejemplo S3, que es un servicio de alojamiento en la nube utilizado para archivos multimedia de gran tamaño, además de contar con su propia CDN que facilitará el acceso a los datos almacenados.


\newpage
\subsection{Análisis del Módulo Central de Procesamiento}


\begin{table}[h]
\centering
\begin{tabular}{|ll|}
\hline
\multicolumn{1}{|l|}{\textbf{ID}}                                                & \textbf{Nombre corto del Requerimiento}                                             \\ \hline
\multicolumn{1}{|l|}{\emph{RF01}}                                              & \emph{Verificar estado funcional de periféricos}                                                             \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Descripción:}  El sistema verificará el estado funcional de los distintos periféricos utilizados en el Módulo Central de Procesamiento\\ \\ \textbf{Elementos:}
\\
\quad $\bullet$ Rasperry Pi\\
\quad $\bullet$ Cámara Digital\\
\quad $\bullet$ Zumbador Pasivo\\
\quad $\bullet$ Antena Sixfab
\end{tabular}} \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Solución del Requerimiento:}\\
Utilizando métodos de comprobación ofrecidos por cada uno de las libererías de los periféricos, se comprobará que funcionen de manera correcta, en caso contrario se enviará una alerta al módulo de Estación Base.\end{tabular}}                                                    \\ \hline
\end{tabular}
\caption{RF01- Verificar estado funcional de periféricos}
\end{table}


\begin{table}[h]
\centering
\begin{tabular}{|ll|}
\hline
\multicolumn{1}{|l|}{\textbf{ID}}                                                & \textbf{Nombre corto del Requerimiento}                                             \\ \hline
\multicolumn{1}{|l|}{\emph{RF02}}                                              & \emph{Activar Alarma}                                                             \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Descripción:}  El sistema activará el zumbador en caso de que el Submódulo de \\ \\ \textbf{Elementos:}
\\
\quad $\bullet$ Rasperry Pi\\
\quad $\bullet$ Zumbador Pasivo

\end{tabular}} \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Solución del Requerimiento:}\\
Utilizando métodos de comprobación ofrecidos por cada uno de las libererías de los periféricos, se comprobará que funcionen de manera correcta, en caso contrario se enviará una alerta al módulo de Estación Base.\end{tabular}}                                                    \\ \hline
\end{tabular}
\caption{RF02- Activar Alarma}
\end{table}





\newpage
\subsubsection{Análisis del Submódulo Visión Artificial}
\begin{itemize}


\item \textbf{Requerimientos Funcionales}

\begin{table}[h]
\centering
\caption{RF01- Capturar Video en Tiempo Real}
\begin{tabular}{|ll|}
\hline
\multicolumn{1}{|l|}{\textbf{ID}}                                                & \textbf{Nombre corto del Requerimiento}                                             \\ \hline
\multicolumn{1}{|l|}{\emph{RF01}}                                              & \emph{Capturar video en tiempo real}                                                             \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Descripción:}  El sistema capturará video en todo momento\\ \\ \textbf{Elementos:}
\\
\quad $\bullet$ Conductor\\
\quad $\bullet$ Incidencias\\
\quad $\bullet$ Administrador\\
\quad $\bullet$ MongoDB
\end{tabular}} \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Solución del Requerimiento:}\\
Con el uso de una cámara digital, se capturará video en tiempo real.\end{tabular}}                                                    \\ \hline
\end{tabular}

\end{table}


\begin{table}[h]
\centering
\caption{RF02- Delimitar región de Interés}
\begin{tabular}{|ll|}
\hline
\multicolumn{1}{|l|}{\textbf{ID}}                                                & \textbf{Nombre corto del Requerimiento}                                             \\ \hline
\multicolumn{1}{|l|}{\emph{RF02}}                                              & \emph{Delimitar una región de Interés}                                                             \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Descripción:}  El sistema capturará video en todo momento\\ \\ \textbf{Elementos:}
\\
\quad $\bullet$ OpenCV\\
\quad $\bullet$ Cascadas Haar

\end{tabular}} \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Solución del Requerimiento:}\\
Utilizando el software de OpenCV y .\end{tabular}}                                                    \\ \hline
\end{tabular}

\end{table}


\end{itemize}


\newpage

\subsubsection{Análsis y elección del modelo de Red Neuronal}

Debido a que el presente proyecto se plantea resolver un problema de clasificación, a continuación se analizará que tipos de modelos de redes neuronales son los más aptos para la resolución de los mismos.

\begin{itemize}
\item Redes Neuronales Unicapa
En el caso mas simple de una red neuronal, las neuronas de la capa de entrada se limitan a recibir las señales de entrada. Estas se encargan de redistribuir estas señales a las neuronas de la capa de salida. A esto se le llama una red neuronal unicapa.



\begin{center}
  \includegraphics[scale=0.4]{imagenes/unicapa}
\captionof{figure}{Redes Unicapa}
 \label{fig:boost}
\end{center}


Utilizando al herramiente de \emph{PlayGround Tensorflow} podemos observar la eficacia de este tipo de redes al resolver problemas de clasifiación.
Si se le pide a esta Red Neuronal que sombree el área del color de los puntos mostrados dentro de la gráfica, se puede observar que es incapaz de realizarlo de manera correcta.

\begin{center}
  \includegraphics[scale=0.4]{imagenes/unicapa2}
\captionof{figure}{Redes Unicapa}
 \label{fig:boost}
\end{center}


\item Redes Neuronales Multicapa


Existe otro tipo de módelo de red neuronal que utiliza capas intermedias entre la capa de salida y la capa de entrada, a estas redes se les conoce como redes profundas o redes multicapa.

\begin{center}
  \includegraphics[scale=0.7]{imagenes/multicapa}
\captionof{figure}{Redes Unicapa}
 \label{fig:boost}
\end{center}

En la siguiente figura se puede apreciar que las redes neuronales multicapa tienen una eficiencia mayor a la hora de realizar el mismo problema de clasificación de puntos.Sin embargo, aún no puede resolver este problema correctamente. 


\begin{center}
  \includegraphics[scale=0.4]{imagenes/capasocultas}
\captionof{figure}{Redes Neuronal con 2 Capas Ocultas de 4 Neuronas cada una}
 \label{fig:boost}
\end{center}

\item \textbf{Funciones de Activación}

Una función de activación es un filtro o umbral que modifica o impone límites en los valores resultantes de una capa en una red neuronal. A continucación se muestran los resultados al resolver el mismo problema de clasificación de puntos de colores utilizando distintas funciones de activación.

\begin{itemize}
\item \textbf{ReLU}
Esta función de activación consiste en anular los valores de entrada negativos y conservar los valores positivos con sus valores originales.

\begin{center}
  \includegraphics[scale=0.4]{imagenes/funrelu}
\captionof{figure}{Representación Gráfica de la Función ReLu}
 \label{fig:boost}
\end{center}


\begin{center}
  \includegraphics[scale=0.4]{imagenes/relu}
\captionof{figure}{Redes Neuronal con 2 Capas Ocultas de 4 Neuronas cada una utilizando la función de Activación ReLu}
 \label{fig:boost}
\end{center}

\item \textbf{Tanh}
La función de la tangente hiperbólica toma cualquier valor real como valores de entrada y de salida en el rango de -1 a 1. Cuanto mayor sea la entrada, más cerca estará del valor de salida de 1.0. Por otro lado, mientras sea menor sea la entrada, el valor de salida se aproximará mas a -1.0


\begin{center}
  \includegraphics[scale=0.2]{imagenes/funtanh}
\captionof{figure}{Representación gráfica de la función Tangente Hiperbólica}
 \label{fig:boost}
\end{center}




\begin{center}
  \includegraphics[scale=0.4]{imagenes/tanh}
\captionof{figure}{Redes Neuronal con 2 Capas Ocultas de 4 Neuronas cada una utilizando la función de Activación Tanh}
 \label{fig:boost}
\end{center}

\end{itemize}
Existe un tipo de Red Neuronal que integra los puntos anteriormente vistos: capas ocultas y funciones de activación. Este tipo de red se le conoce como Red Neuronal Convolucional. Cómo su nombre lo indica, estas redes se basan en el uso de la operación de convolución, además de hacer uso de las capas de ocultas y funciones de activación. Estas redes son de las mas eficientes en el campo de visión artificial. \cite{Referencia0}. Por lo tanto, se decidió hacer uso de una red convolucional para cumplir los requisitos previamente planteados.

\end{itemize}

\newpage

\subsection{Análisis del Módulo de Comunicaciones}
Los sistemas automatizados de comunicación, mayormente inalámbricos, se encargan de recopilar datos remotos y transmitir la información.
La tecnología previamente elegida para la implementación de este módulo es la red 4G/LTE, su estándar es establecido por el 3GPP (Proyecto de asociación de tercera generación) donde establece sus especificaciones en la versión 8 de sus estándares, el cual clasifica hasta 13 categorías LTE\cite{Referencian14}. En estas categorías se especifica la velocidad máxima de carga y descarga, siendo la categoría 0 la velocidad más baja.
En la Tabla \ref{tab:CLTE} se observan las categorías LTE que existen junto con su velocidad máxima de bajada y subida,de la categoría 0 a la 5 se definen para equipos de usuarios, es decir, telefonía celular. 
Las antenas de la red 4G pueden conectarse a la red LTE-M que forma parte de la tecnología LPWAN sin necesidad de una puerta de enlace y con una velocidad de hasta 5Mbps. 

\begin{table}[H]
	\begin{center}
	\caption{\label{tab:CLTE} Categorías LTE}
\begin{tabular}{| c | c | c |}
\hline

Categoría & Velocidad Máxima de Bajada(Mbps)& Velocidad Máxima de Subida (Mpbs \\ \hline
0 &  1 &  1   \\ \hline
1 &  10 &  5  \\ \hline
2 &  50 &  25   \\ \hline
3 & 100 &  50  \\ \hline
4 & 150 &  50  \\ \hline
5 & 300 &  75   \\ \hline
6 &  300 &  50  \\ \hline
7 &  300 &  150 \\ \hline
8 & 1200 & 600   \\ \hline
9 &  450 &  50  \\ \hline
10 &  450 &  100  \\ \hline
11 &  600 &  50 \\ \hline
12 &  600 &  100  \\ \hline
13 & 390 &  150  \\ \hline

\end{tabular}

\end{center}
\end{table}

Para este sistema, el análisis debe cumplir con los parámetros que dicta el teorema de Shannon-Hartley (véase la sección \ref{tsh}) que establece que, dado un canal con ruido con una capacidad $C$ e información transmitida en una tasa $R$ entonces si $R<C$ existe una técnica de codificación que permite que la probabilidad de error en el $Rx$ se reduzca. Se debe cumplir que la tasa de bits debe ser siempre menor a la capacidad del canal.

Este análisis se divide en:
\begin{itemize}
\item Telemetría:\\ El módulo de telemetría es el encargado de recopilar, procesar y transmitir las coordenadas de la ubicación geográfica del conductor a la estación base que se encarga de monitorear los datos obtenidos.

\item Datos:\\ El encargado de recopilar, procesar y transmitir los fotogramas que el sistema identifica como somnolencia en el conductor, así como un mensaje informativo.

\item Telemetría:\\ Encargado de revisar la cobertura de la zona o regiones presentes en el alcance del sistema.
\end{itemize}

\subsection{Análisis de Telemetría }
El objetivo que tiene el módulo de telemetría es mandar el posicionamiento mediante coordenadas (latitud y longitud) del vehículo en movimiento en tiempo real. Las coordenadas serán mandadas en forma de cadena de texto, teniendo un aproximado de hasta 300 bits, otro punto a considerar es el periodo de tiempo entre el envío de cada posición, al tratarse de un vehículo en movimiento y la velocidad máxima siendo regida por Semovi (Secretaría de movilidad de la ciudad de México) que dicta una velocidad promedio de entre 50-80 km/h\cite{Referencian15}.

Se propone una velocidad de 60 km/h:

\begin{equation*}
60 \frac{km}{h} \cdot \frac{1000m}{1km}\cdot \frac{1h}{60min} \cdot \frac{1min}{60s}= 16.6 \frac{m}{s}\approx1 7\frac{m}{s}
\end{equation*}


El automóvil se desplaza aproximadamente 17 metros en 1 segundo por lo que al realizar el envío en periodos de 10 segundos, se  garantiza el trazado de la ruta en el mapa. Teniendo 170 metros recorridos cada 10 segundos del viaje.
Verificando que se cumpla el Teorema de Shannon-Hartley  tenemos:
\begin{equation*}
300 bits \cdot 10 s=3kbps
\end{equation*} 
y la máxima tasa de datos que el transceptor tiene es de 5 Mbps.

Cumpliéndose la relación establecida de $R<C$.
\begin{equation*}
3kbps<5 Mbps
\end{equation*}

\subsection{Análisis de Datos }
El objetivo que tiene el análisis de los datos es mandar fotogramas a la estación base para su futura gestión y validación, así como el almacenamiento de estos; de igual manera se pretende el envío de mensajes informativos para la estación base.
Anteriormente se establecen las especificaciones que debe tener el material multimedia a utilizar, las características que debe tener el clip grabado es una profundidad de bits de mínimo 8  y una resolución de mínimo 960 x 540 píxeles comúnmente conocido como QHD o \emph{Quarter of High Definition} por sus siglas en inglés, que es lo mínimo necesario que requiere el sistema, todo esto en una secuencia de 30fps.
Tenemos que:

\begin{equation*}
960 \; x \; 540 \; x \; 8=4,147,200 \; bits
\end{equation*}

Cada imagen tiene 4,147,200 bits entonces en 1 segundo se transmiten:
\begin{equation*}
4,147,200 \; x \; 30 fps=124.41 \; Mbps
\end{equation*}
Que rebasa la capacidad de canal de red establecida, por lo que se implementa el uso de un compresor de video MP4 que tiene una relación de compresión de 16:1 \cite{Referencian16} para así modificar la resolución en la que se almacena el video en la estación base, por otro lado, se envían al menos 2 fotogramas por segundo para no sobrepasar la capacidad de canal.   
Tenemos que:

\begin{equation*}
640 \; x \; 480 \; x \; 8=2,457,600 \; bits
\end{equation*}
Cada imagen tiene 2,457,600 bits entonces en 1 segundo se transmiten:
\begin{equation*}
2,457,600 \; x \; 2 fps=4.91 \; Mbps
\end{equation*}
Cumpliéndose nuevamente la relación establecida $R < C$.
\begin{equation*}
4.91 Mbps<5 Mbps
\end{equation*}
Más 3 kbps de la tasa de bits a utilizar del texto informativo.

\subsection{Análisis de Cobertura}

La red de telefonía celular funciona mediante celdas (véase la Figura \ref{fig:handover}), estas celdas tienen el objetivo de mantener conectados a los dispositivos en las diferentes áreas de cobertura y cada una de ellas contiene una estación base o antena. El \emph{handover}  o \emph{handoff} es el proceso de transferir el servicio de una celda a otra\cite{Referencian17} y se tiene la siguiente métrica:
\begin{itemize}
\item Se considera un \emph{handoff} fuerte cuando al ir cambiando de celdas  se presente algún problema en la velocidad de la red logrando así la pérdida de la misma.
\item Se considera un \emph{handoff} suave cuando al ir cambiando de celdas no se presente algún problema de la red o este sea mínimo.
\end{itemize}
Ya sea cuando se pierde la calidad en una de ellas o cuando el dispositivo se va trasladando.Este mecanismo tiene por objetivo el garantizar la correcta realización del servicio en las condiciones mencionadas anteriormente. 
Para el análisis de cobertura de la red LTE se tiene en cuenta el sistema \emph{handoff} porque el dispositivo se va trasladando entre distintas celdas.

\begin{center}
  \includegraphics[scale=0.5]{imagenes/handover}
\captionof{figure}{Esquema \emph{handover} entre dos celdas }
 \label{fig:handover}
\end{center}

La cobertura de LTE por Telcel es la más amplia del país \cite{Referencian18}, su mayor cobertura está concentrada en la Ciudad de México, por lo que existe una buena recepción, aunque en ocasiones debido a la saturación de la red o al transferir el servicio de la antena de una estación base a otra se puede encontrar alguna intermitencia o retraso, en estos casos el módulo va a pasar a modo de espera para enviar la información una vez se restablezca la red.

\begin{center}
  \includegraphics[scale=1.3]{imagenes/mapaLTE}
\captionof{figure}{Mapa de cobertura de la red LTE }
 \label{fig:mapaLTE}
\end{center}

En el mapa de cobertura la zona verde hace referencia a zonas con cobertura garantizada y la zona amarilla cobertura no garantizada, en caso de realizar pruebas en las zonas amarillas del mapa se va a notar un cambio en la velocidad del dispositivo móvil ya sea para la transferencia de archivos o la conectividad a la red
ocasionando un \emph{handoff fuerte}; por el otro lado, al estar realizando pruebas en la zona verde del mapa su \emph{handoff} será más suave.

\textbf{Alcances:}
\begin{itemize}
\item Envío de las coordenadas y mensaje informativo del posicionamiento del vehículo a la estación base.
\item Envío del fotograma y mensaje informativo del vehículo a la estación base.
\item Compresión a MP4 para la transmisión y almacenamiento del fotograma.
\item Recepción del estatus del envío de la información transmitida.
\end{itemize}

\textbf{Restricciones:}
\begin{itemize}
\item La velocidad de transmisión es de hasta 5Mbps.
\item El envío de las coordenadas en periodos de 10 segundos.
\item El envío de fotogramas a la estación base se mantiene limitado a 2 fps.
\item El envío de la cadena de texto se mantiene limitada a 300 bits.
\item El sistema de comunicación transmite la información solamente en zonas que cuenten con cobertura garantizada.
\end{itemize}
 



\subsection{Análisis del Módulo de Estación Base}
El módulo de la estación base tiene como objetivo que el usuario administrador, visualice y confirme el estado de los reportes de incidencia que se hayan presentado por parte del conductor, por tal motivo, se realizará una aplicación web, la cual se conectará a una base de datos NoSQL. En ella se guardarán los reportes de incidencias y se podrán visualizar por medio de la aplicación web. Cabe aclarar que el video de la incidencia se almacenará en la nube, ya que al ser contenido multimedia no se puede guardar en la base de datos, únicamente se guardará el URL para acceder al video. Las credenciales del usuario serán almacenadas en Amazon Cognito, con la cuales podrán iniciar sesión dentro de la Aplicación Web, la cual estará alojada en un servidor web.  




El sistema contará con los siguientes requerimientos:   \\

\textbf{Requerimientos Funcionales del Módulo de Estación Base}

\begin{table}[h]
\centering
\caption{RF01- Guardar Incidencia }
\begin{tabular}{|ll|}
\hline
\multicolumn{1}{|l|}{\textbf{ID}}                                                & \textbf{Nombre corto del Requerimiento}                                             \\ \hline
\multicolumn{1}{|l|}{\emph{RF01}}                                              & \emph{Guardar Incidencia}                                                             \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Descripción:}La base de datos almacenará la información de cada reporte de incidencia que se envié desde el Módulo Central de Procesamiento. \\ \\ \textbf{Elementos:}
\\
\quad $\bullet$ Id del Conductor \\
\quad $\bullet$ Nombre de Conductor\\
\quad $\bullet$ Apellidos de Conductor  \\
\quad $\bullet$ Número de Incidencias\\
\quad $\bullet$ Fecha\\
\quad $\bullet$ Hora\\
\quad $\bullet$ Estado de la Incidencia \\
\quad $\bullet$ Ubicación  \\
\quad $\bullet$ URL del video 
\end{tabular}} \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Solución del Requerimiento:}\\
El Módulo de Procesamiento Central puede insertar datos en la base datos.\end{tabular}}                                                    \\ \hline
\end{tabular}

\end{table}


\begin{table}[h]
\centering
\caption{RF02- Guardar Video }
\begin{tabular}{|ll|}
\hline
\multicolumn{1}{|l|}{\textbf{ID}}                                                & \textbf{Nombre corto del Requerimiento}                                             \\ \hline
\multicolumn{1}{|l|}{\emph{RF02}}                                              & \emph{Guardar Video }                                                             \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Descripción:}La base de datos almacenará la información de cada reporte de incidencia que se envié desde el Módulo Central de Procesamiento. \\ \\ \textbf{Elementos:}
\\
\quad $\bullet$ Video de incidencia 
\end{tabular}} \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Solución del Requerimiento:}\\
El Módulo de Procesamiento Central puede insertar el video en el almacenamiento de objetos, mientras que la base de datos obtiene la URL del video guardado. \end{tabular}}                                                    \\ \hline
\end{tabular}

\end{table}

\begin{table}[h]
\centering
\caption{RF03- Conectar Aplicación Web }
\begin{tabular}{|ll|}
\hline
\multicolumn{1}{|l|}{\textbf{ID}}                                                & \textbf{Nombre corto del Requerimiento}                                             \\ \hline
\multicolumn{1}{|l|}{\emph{RF03}}                                              & \emph{Conectar Aplicación Web }                                                             \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Descripción:}La base de datos almacenará la información de cada reporte de incidencia que se envié desde el Módulo Central de Procesamiento. \\ \\ \textbf{Elementos:}
\\
\quad $\bullet$ Node.js  \\
\quad $\bullet$ React   \\
\quad $\bullet$ Express   \\
\quad $\bullet$ MongoDB 

\end{tabular}} \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Solución del Requerimiento:}\\
El usuario administrador puede realizar la inserción, modificación, eliminación y consulta de datos desde la aplicación web.  \end{tabular}}                                                    \\ \hline
\end{tabular}

\end{table}


\clearpage


\begin{table}[h]
\centering
\caption{RF04- Desplegar Aplicación Web}
\begin{tabular}{|ll|}
\hline
\multicolumn{1}{|l|}{\textbf{ID}}                                                & \textbf{Nombre corto del Requerimiento}                                             \\ \hline
\multicolumn{1}{|l|}{\emph{RF04}}                                              & \emph{Desplegar Aplicación Web  }                                                             \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Descripción:}La aplicación web se alojará en una red de entrega de contenido (CDN), disponible con una URL.  \\ \\ \textbf{Elementos:}
\\
\quad $\bullet$ AWS Amplify  \\
\quad $\bullet$ GitHub \\
\quad $\bullet$ Amazon S3 
\end{tabular}} \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Solución del Requerimiento:}\\
El usuario administrador puede acceder a la interfaz de la aplicación web, haciendo uso de la URL en el navegador web.  \end{tabular}}                                                    \\ \hline
\end{tabular}

\end{table}



\begin{table}[h]
\centering
\caption{RF05- Guardar Credenciales de Usuario Administrador }
\begin{tabular}{|ll|}
\hline
\multicolumn{1}{|l|}{\textbf{ID}}                                                & \textbf{Nombre corto del Requerimiento}                                             \\ \hline
\multicolumn{1}{|l|}{\emph{RF05}}                                              & \emph{Guardar Credenciales de Usuario Administrador }                                                             \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Descripción:}Se guardarán únicamente las credenciales de los usuarios administradores que podrán acceder a la aplicación web. \\ \\ \textbf{Elementos:}
\\
\quad $\bullet$ Amazon Cognito 
\end{tabular}} \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Solución del Requerimiento:}\\
El usuario administrador puede iniciar sesión en la aplicación web.  \end{tabular}}                                                    \\ \hline
\end{tabular}

\end{table}
\textbf{Requerimientos No Funcionales del Módulo de Estación Base}
\clearpage


\begin{table}[]
\caption{Requerimientos No Funcionales del Módulo de Estación Base}
\begin{tabular}{{|m{0.12\linewidth}|m{0.25\linewidth}|m{0.50\linewidth}|}}
\hline
\textbf{ID} & \textbf{Nombre del requerimiento} & \textbf{Descripción } \\ \hline
\emph{RNF01 } & Disponibilidad & La disponibilidad del sistema será continua, el usuario podrá acceder a la información las 24 horas del día.  \\ \hline
\emph{RNF02 } & Interoperabilidad  & El sistema será capaz de intercambiar información con el Módulo Central de Procesamiento a través del Módulo de Telemetría.  \\ \hline
\emph{RNF03 } & Seguridad  & El sistema hará uso de encriptación AES-256 para garantizar la seguridad de las credenciales de los usuarios. \\ \hline
\emph{RNF04 } & Usabilidad  & El sistema estará enfocado a la visualización de reportes, por lo que este tendrá una interfaz intuitiva y amigable para el usuario. El sistema proporcionará mensajes de advertencia orientados al usuario, en caso de ocurrir un error en el Módulo Central de Procesamiento. \\ \hline

\end{tabular}

\end{table}


\textbf{Análisis de Casos de Uso}

Con base en los requerimientos se realizó el siguiente diagrama de casos de uso, el cual muestra las actividades y la interacción con el Módulo de Estación base y el Módulo Central de Procesamiento. 

\begin{center}
  \includegraphics[scale=.55]{imagenes/CasosdeusosMEB}
\captionof{figure}{Diagrama de Casos de Usos del Módulo de Estación Base}
 \label{fig:CasosdeusosMEB}
\end{center}


\begin{table}[h]
\centering
\caption{Caso de Uso 01 - Guardar Incidencia}
\begin{tabular}{|ll|}
\hline
\multicolumn{1}{|l|}{\textbf{Nombre del Caso de Uso}}                                                & \emph{Guardar Incidencia}                                             \\ \hline
\multicolumn{1}{|l|}{\textbf{Actores}}                                              & \emph{Módulo Central de Procesamiento, Módulo de Estación Base}                                                             \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Descripción:}El sistema almacenará las incidencias recibidas por el módulo de Comunicaciones. \\ \\ \textbf{Precondiciones:}
\\
\quad $\bullet$ Contar con una conexión al Módulo de Comunicaciones\\
\quad $\bullet$ Contar con una conexión a la Base de Datos
\end{tabular}} \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Elementos:}\\
\quad $\bullet$ Reporte de Incidencia\\
\quad $\bullet$ Módulo de Comunicaciones\end{tabular}}                                                    \\ \hline
\end{tabular}

\end{table}



\begin{table}[h]
\centering
\caption{Caso de Uso 02 - Guardar Video }
\begin{tabular}{|ll|}
\hline
\multicolumn{1}{|l|}{\textbf{Nombre del Caso de Uso}}                                                & \emph{Guardar Video}                                             \\ \hline
\multicolumn{1}{|l|}{\textbf{Actores}}                                              & \emph{Módulo Central de Procesamiento Módulo de Estación Base}                                                             \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Descripción:}Se almacenará el video recibido por el Módulo de Comunicaciones \\ \\ \textbf{Precondiciones:}
\\
\quad $\bullet$ Contar con una conexión al Módulo de Comunicaciones\\
\quad $\bullet$ Contar con una conexión a la Base de Datos
\end{tabular}} \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Elementos:}\\
\quad $\bullet$ Video\\
\quad $\bullet$ Módulo de Comunicaciones\end{tabular}}                                                    \\ \hline
\end{tabular}

\end{table}


\begin{table}[h]
\centering
\caption{Caso de Uso 03 - Conectar Aplicación Web }
\begin{tabular}{|ll|}
\hline
\multicolumn{1}{|l|}{\textbf{Nombre del Caso de Uso}}                                                & \emph{Conectar Aplicación Web}                                             \\ \hline
\multicolumn{1}{|l|}{\textbf{Actores}}                                              & \emph{Módulo de Estación Base}                                                             \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Descripción:}Se realizará la conexión de la aplicación web y la base de datos \\ \\ \textbf{Precondiciones:}
\\
\quad $\bullet$ Contar con el servicio de Hosting Disponible
\end{tabular}} \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Elementos:}\\
\quad $\bullet$ Aplicación Web\\
\quad $\bullet$ Base de Datos\\ 
\quad $\bullet$ Servicio de Hosting\\   \end{tabular}}                                                    \\ \hline
\end{tabular}

\end{table}

\begin{table}[h]
\centering
\caption{Caso de Uso 04 - Desplegar Aplicación Web}
\begin{tabular}{|ll|}
\hline
\multicolumn{1}{|l|}{\textbf{Nombre del Caso de Uso}}                                                & \emph{Desplegar Aplicación Web}                                             \\ \hline
\multicolumn{1}{|l|}{\textbf{Actores}}                                              & \emph{Módulo Central de Procesamiento, Módulo de Estación Base}                                                             \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Descripción:} Utilizando el servicio de Hosting ofrecido por Amazon Amplify se desplegará la aplicación web\\ \\ \textbf{Precondiciones:}
\\
\quad $\bullet$ Contar con una cuenta registrada en Amazon Amplify
\end{tabular}} \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Elementos:}\\
\quad $\bullet$ Aplicación Web\\
\quad $\bullet$ Base de Datos\\
\quad $\bullet$ Servicio de Hosting \end{tabular}}                                                    \\ \hline
\end{tabular}

\end{table}

\begin{table}[h]
\centering
\caption{Caso de Uso 05 - Guardar Credenciales de Usuario Administrador }
\begin{tabular}{|ll|}
\hline
\multicolumn{1}{|l|}{\textbf{Nombre del Caso de Uso}}                                                & \emph{Guardar Credenciales de Usuario Administrador}                                             \\ \hline
\multicolumn{1}{|l|}{\textbf{Actores}}                                              & \emph{Módulo Central de Procesamiento}                                                             \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Descripción:}Utilizando Amazon Congito, el sistema permitirá almacenar nuevos usuarios administradores \\ \\ \textbf{Precondiciones:}
\\
\quad $\bullet$ Contar con el servicio de la aplicación web Desplegado
\end{tabular}} \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Elementos:}\\
\quad $\bullet$ Amazon Cognito
\end{tabular}}                                                    \\ \hline
\end{tabular}

\end{table}










\newpage
\subsubsection{Análisis de la Aplicación Web}






\begin{itemize}






\item \textbf{Análisis de Requerimientos Funcionales}
\begin{table}[H]
\centering
\caption{RF01- Iniciar Sesión}
\begin{tabular}{|ll|}
\hline
\multicolumn{1}{|l|}{\textbf{ID}}                                                & \textbf{Nombre corto del Requerimiento}                                             \\ \hline
\multicolumn{1}{|l|}{\emph{RF01}}                                              & \emph{Iniciar Sesión}                                                             \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{@{}l@{}}\textbf{Descripción:}  El sistema permitirá iniciar sesión en la aplicación web\\ \\ \textbf{Elementos:}
\\
\quad $\bullet$ Amazon Cognito\\
\quad $\bullet$ Administrador\\
\quad $\bullet$ Credenciales\\
\quad $\bullet$ MongoDB
\end{tabular}} \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Solución del Requerimiento:}\\
El sistema, con la ayuda de los servicios de Amazon Cognito, comprobará que las credenciales ingresadas por parte del usuario administrador se encuentren en la base de datos. En caso contrario, la aplicación web indicará que ese usuario no se encuentra registrado en la base de datos.\end{tabular}}                                                    \\ \hline
\end{tabular}

\end{table}




\begin{table}[H]
\centering
\caption{RF02- Mostrar el Historial de Reportes de Incidencia}
\begin{tabular}{|ll|}
\hline
\multicolumn{1}{|l|}{\textbf{ID}}                                                & \textbf{Nombre corto del Requerimiento}                                             \\ \hline
\multicolumn{1}{|l|}{\emph{RF02}}                                              & \emph{Mostrar el Historial de Reportes de Incidencia}                                                             \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Descripción:}  El sistema desplegará en forma de lista todas las incidencias que se tengan registradas en la base de datos\\ \\ \textbf{Elementos:}
\\
\quad $\bullet$ Conductor\\
\quad $\bullet$ Incidencias\\
\quad $\bullet$ Administrador\\
\quad $\bullet$ MongoDB
\end{tabular}} \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Solución del Requerimiento:}\\
El sistema recuperará de la base de datos todas las incidencias que se tengan registradas.\end{tabular}}                                                    \\ \hline
\end{tabular}

\end{table}




\begin{table}[H]
\centering
\caption{RF03- Visualizar Reporte de Incidencia}
\begin{tabular}{|ll|}
\hline
\multicolumn{1}{|l|}{\textbf{ID}}                                                & \textbf{Nombre corto del Requerimiento}                                             \\ \hline
\multicolumn{1}{|l|}{\emph{RF03}}                                              & \emph{Visualizar Reporte de Incidencia}                                                             \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Descripción:}  El sistema desplegará los detalles específicos de cada incidencia registrada.\\ \\ \textbf{Elementos:}
\\
\quad $\bullet$ Incidencia\\
\quad $\bullet$ Administrdor\\
\quad $\bullet$ Conductor
\end{tabular}} \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Solución del Requerimiento:}\\
El usuario administrador podrá visualizar los reportes individuales de incidencias de cada conductor al hacer click en cualquiera de las incidencias mostrada en la lista principal. Los reportes contendrán información sobre la fecha, hora, ubicación y un video corto del momento en que fueron detectados síntomas de somnolencia.\end{tabular}}                                                    \\ \hline
\end{tabular}

\end{table}

\begin{table}[H]
\centering
\caption{RF04- Confirmar Incidencia}
\begin{tabular}{|ll|}
\hline
\multicolumn{1}{|l|}{\textbf{ID}}                                                & \textbf{Nombre corto del Requerimiento}                                             \\ \hline
\multicolumn{1}{|l|}{\emph{RF04}}                                              & \emph{Confirmar Incidencia}                                                             \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Descripción:}  El sistema permitirá al administrador confirmar la incidencia, esto para descartar que se trate de un falso positivo.\\ \\ \textbf{Elementos:}
\\
\quad $\bullet$ Administrador\\
\quad $\bullet$ Incidencia\\
\quad $\bullet$ Conductor\\
\quad $\bullet$ MongoDB
\end{tabular}} \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Solución del Requerimiento:}\\
El usuario administrador podrá confirmar la incidencia después de haber revisado el videoclip del momento de somnolencia con la intención de descartar falsos positivos. Esto será posible ingresando a una incidencia específica mostrando sus detalles.\end{tabular}}                                                    \\ \hline
\end{tabular}

\end{table}

\begin{table}[H]
\centering
\caption{RF05 - Recuperar Contraseña}
\begin{tabular}{|ll|}
\hline
\multicolumn{1}{|l|}{\textbf{ID}}                                                & \textbf{Nombre corto del Requerimiento}                                             \\ \hline
\multicolumn{1}{|l|}{\emph{RF05}}                                              & \emph{Recuperar Contraseña}                                                             \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Descripción:}El sistema contará con una opción para recuperar la contraseña del administrador en caso de que sea olvidada la contraseña.\\ \\ \textbf{Elementos:}
\\
\quad $\bullet$ Amazon Cognito\\
\quad $\bullet$ Email\\
\quad $\bullet$ Administrador\\
\quad $\bullet$ MongoDB
\end{tabular}} \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Solución del Requerimiento:}\\
El sistema requerirá que el usuario administrador ingrese el correo con el que fue registrado. Posteriormente se le enviará un código de recuperación de contraseña a ese correo. El administrador ingresará se código en el apartado de recuperar contraseña y así podrá ingresar una nueva contraseña.\end{tabular}}                                                    \\ \hline
\end{tabular}

\end{table}

\begin{table}[H]
\centering
\caption{RF06- Mostrar perfil del Conductor}
\begin{tabular}{|ll|}
\hline
\multicolumn{1}{|l|}{\textbf{ID}}                                                & \textbf{Nombre corto del Requerimiento}                                             \\ \hline
\multicolumn{1}{|l|}{\emph{RF06}}                                              & \emph{Mostrar Perfil Conductor}                                                             \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Descripción:}El sistema permitirá al usuario administrador visualizar los datos de cada conductor registrado en la base de datos.\\ \\ \textbf{Elementos:}
\\
\quad $\bullet$ Perfil\\
\quad $\bullet$ Conductor\\

\end{tabular}} \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Solución del Requerimiento:}\\
El administrador podrá consultar cada uno de los perfiles de los conductores registrados en la base de datos dando click en el nombre del mismo. En dicho perfil se mostrarán datos como nombre, apellido, así como el número de incidencias de dicho conductor, con sus respectivos detalles.\end{tabular}}                                                    \\ \hline
\end{tabular}

\end{table}

\begin{table}[H]
\centering
\caption{RF07- Mostrar ubicación Geográfica}
\begin{tabular}{|ll|}
\hline
\multicolumn{1}{|l|}{\textbf{ID}}                                                & \textbf{Nombre corto del Requerimiento}                                             \\ \hline
\multicolumn{1}{|l|}{\emph{RF07}}                                              & \emph{Mostrar Ubicación Geográfica}                                                             \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Descripción:}La aplicación web, con ayuda de los datos proporcionados por el módulo de telemetría, mostrará la ubicación en tiempo real de un conductor.\\ \\ \textbf{Elementos:}
\\
\quad $\bullet$ Ubicación en Tiempo Real\\
\quad $\bullet$ Módulo de Telemetría\\

\end{tabular}} \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Solución del Requerimiento:}\\
El sistema permitirá al administrador consultar la ubicación de los conductores en tiempo real. Para esto el administrador deberá de ingresar previamente al perfil del conductor del cual desea consultar dicha ubicación.\end{tabular}}                                                    \\ \hline
\end{tabular}

\end{table}



\begin{table}[H]
\centering
\caption{RF08- Descartar Incidencia}
\begin{tabular}{|ll|}
\hline
\multicolumn{1}{|l|}{\textbf{ID}}                                                & \textbf{Nombre corto del Requerimiento}                                             \\ \hline
\multicolumn{1}{|l|}{\emph{RF08}}                                              & \emph{Descartar Incidencia}                                                             \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Descripción:}El sistema permitirá catalogar una incidencia como Falsa si fuera el caso.\\ \\ \textbf{Elementos:}
\\
\quad $\bullet$ Incidencia\\
\quad $\bullet$ Administrador\\

\end{tabular}} \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Solución del Requerimiento:}\\
En caso de presentarse una incidencia falsa, después de haber sido revisada por el administrador, esta podrá ser catalogada como falsa incidencia y será eliminada automáticamente de la base de datos.\end{tabular}}                                                    \\ \hline
\end{tabular}

\end{table}

\begin{table}[H]
\centering
\caption{RF09- Registrar Usuario}
\begin{tabular}{|ll|}
\hline
\multicolumn{1}{|l|}{\textbf{ID}}                                                & \textbf{Nombre corto del Requerimiento}                                             \\ \hline
\multicolumn{1}{|l|}{\emph{RF09}}                                              & \emph{Registrar Usuario}                                                             \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Descripción:}El sistema le permitirá al administrador registrar nuevos conductores.\\ \\ \textbf{Elementos:}
\\
\quad $\bullet$ Nombre\\
\quad $\bullet$ Apellido\\
\quad $\bullet$ ID\\

\end{tabular}} \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Solución del Requerimiento:}\\
El Administrador podrá registrar a nuevos conductores en el sistema. El sistema generará de manera automática el ID del nuevo conductor\end{tabular}}                                                    \\ \hline
\end{tabular}

\end{table}

\begin{table}[H]
\centering
\caption{RF10- Mostrar el Historial de Reportes de Incidencia}
\begin{tabular}{|ll|}
\hline
\multicolumn{1}{|l|}{\textbf{ID}}                                                & \textbf{Nombre corto del Requerimiento}                                             \\ \hline
\multicolumn{1}{|l|}{\emph{RF10}}                                              & \emph{Modificar Usuario}                                                             \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Descripción:}El sistema le permitirá al administrador modificar los datos del conductor.\\ \\ \textbf{Elementos:}
\\
\quad $\bullet$ Nombre\\
\quad $\bullet$ Apellido\\
\quad $\bullet$ Conductor\\
\quad $\bullet$ Administrador

\end{tabular}} \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Solución del Requerimiento:}\\
El administrador podrá editar los datos de los conductores como nombre o apellido.\end{tabular}}                                                    \\ \hline
\end{tabular}

\end{table}

\begin{table}[H]
\caption{RF11- Mostrar el Historial de Reportes de Incidencia}
\centering
\begin{tabular}{|ll|}
\hline
\multicolumn{1}{|l|}{\textbf{ID}}                                                & \textbf{Nombre corto del Requerimiento}                                             \\ \hline
\multicolumn{1}{|l|}{\emph{RF11}}                                              & \emph{Elimininar Usuario}                                                             \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Descripción:}El sistema le permitirá al administrador eliminar los datos del conductor.\\ \\ \textbf{Elementos:}
\\
\quad $\bullet$ Conductor\\
\quad $\bullet$ Administrador


\end{tabular}} \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Solución del Requerimiento:}\\
El sistema le permitirá al eliminar los datos de conductores de la base de datos.\end{tabular}}                                                    \\ \hline
\end{tabular}

\end{table}

\begin{table}[H]
\centering
\begin{tabular}{|ll|}
\hline
\multicolumn{1}{|l|}{\textbf{ID}}                                                & \textbf{Nombre corto del Requerimiento}                                             \\ \hline
\multicolumn{1}{|l|}{\emph{RF12}}                                              & \emph{Generar Mensaje de Alerta}                                                             \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Descripción:}El sistema alertará con un mensaje en caso de que algún componente en alguna Unidad Contenedora no funcione correctamente.\\ \\ \textbf{Elementos:}
\\
\quad $\bullet$ Módulo Central de Procesamiento\\
\quad $\bullet$ Administrador\\
\quad $\bullet$ Alerta


\end{tabular}} \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Solución del Requerimiento:}\\
El sistema enviará un mensaje de alerta al administrador indicando que Unidad presenta algún desperfecto, esto con la intención de sea reparada posteriormente.\end{tabular}}                                                    \\ \hline
\end{tabular}
\caption{RF12- Generar Mensaje de Alerta}
\end{table}


	        
\item \textbf{Análisis de Requerimientos no Funcionales}

A continuación se mencionan los requerimientos no funcionales de la aplicación web.

\begin{table}[H]
\caption{Requerimientos No funcionales - Aplicación Web}
\begin{tabular}{|l|l|l}
\cline{1-2}
\textbf{Requerimiento No Funcional} & \textbf{Descripción}                                                                                                                                                                   &  \\ \cline{1-2}
Disponibilidad                      & \begin{tabular}[c]{@{}l@{}}La aplicación web deberá estar \\ disponible las 24 horas del día\end{tabular}                                                                              &  \\ \cline{1-2}
Interoperabilidad                   & \begin{tabular}[c]{@{}l@{}}La aplicación deberá ser accesible desde \\ cualquier sistema operativo \\ mientras se cuenta con un \\ navegador web en su versión más actual\end{tabular} &  \\ \cline{1-2}
Eficiencia                          & \begin{tabular}[c]{@{}l@{}}La aplicación tendrá tiempos de respuesta\\ menores a 100ms.\end{tabular}                                                                                   &  \\ \cline{1-2}
Escalabilidad                       & \begin{tabular}[c]{@{}l@{}}La aplicación web deberá ofrecer la oportunidad de \\ agregar nuevas funcionalidades y \\ soportar un mayor número de usuarios a \\ futuro\end{tabular}     &  \\ \cline{1-2}
Estabilidad                         & \begin{tabular}[c]{@{}l@{}}La aplicación deberá ofrecer un buen \\ funcionamiento mientras se tenga \\ una conexión a internet mínima de 1Mbps\end{tabular}                                      &  \\ \cline{1-2}
\end{tabular}

\end{table}

\item \textbf{Análsis de Casos de Uso}


\begin{center}
  \includegraphics[scale=.6]{imagenes/casosdeusoweb}
\captionof{figure}{Diagrama de Casos de Uso }
 \label{fig:scaraindust}
\end{center}

\textbf{Especificación de Casos de Uso}

\begin{table}[h]
\centering
\caption{Caso de Uso 01 - Iniciar Sesión }
\begin{tabular}{|ll|}
\hline
\multicolumn{1}{|l|}{\textbf{Nombre del Caso de Uso}}                                                & \emph{Iniciar Sesión}                                             \\ \hline
\multicolumn{1}{|l|}{\textbf{Actores}}                                              & \emph{Administrador, BBDD, Amazon Cognito}                                                             \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Descripción:}El administrador ingresará los datos correspondientes para iniciar sesión en la aplicación web. \\ \\ \textbf{Precondiciones:}
\\
\quad $\bullet$ El administrador deberá contar sus credenciales registradas en Amazon Cognito
\end{tabular}} \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Entradas:}\\
\quad $\bullet$ Email\\
\quad $\bullet$ Contraseña
 \end{tabular}}                                                    \\ \hline
\end{tabular}

\end{table}


\begin{table}[h]
\centering
\caption{Caso de Uso 02 - Registrar Usuario }
\begin{tabular}{|ll|}
\hline
\multicolumn{1}{|l|}{\textbf{Nombre del Caso de Uso}}                                                & \emph{Registrar Usuario}                                             \\ \hline
\multicolumn{1}{|l|}{\textbf{Actores}}                                              & \emph{Administrador, BBDD}                                                             \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Descripción:}Solo los usuarios administradores podrán registrar a nuevos conductores en el sistema. \\ \\ \textbf{Precondiciones:}
\\
\quad $\bullet$ Contar con credenciales de acceso como administrador 
\end{tabular}} \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Entradas:}\\
\quad $\bullet$ Nombre\\
\quad $\bullet$ Apellido\\
\quad $\bullet$ Edad
 
\end{tabular}}                                                    \\ \hline
\end{tabular}

\end{table}


\begin{table}[h]
\centering
\caption{Caso de Uso 03 - Modificar Usuario }
\begin{tabular}{|ll|}
\hline
\multicolumn{1}{|l|}{\textbf{Nombre del Caso de Uso}}                                                & \emph{Modificar Usuario}                                             \\ \hline
\multicolumn{1}{|l|}{\textbf{Actores}}                                              & \emph{Administrador, BBDD}                                                             \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Descripción:}El usuario Administrador podrá modificar los datos de los conductores previamente registrados. \\ \\ \textbf{Precondiciones:}
\\
\quad $\bullet$ Contar con credenciales de Administrador \\
\quad $\bullet$ Que exista una entrada del conductor a modificar
\end{tabular}} \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Entradas:}\\
\quad $\bullet$ Nombre\\
\quad $\bullet$ Apellido\\
\quad $\bullet$ Edad
 
  \end{tabular}}                                                    \\ \hline
\end{tabular}

\end{table}


\begin{table}[h]
\centering
\caption{Caso de Uso 04 - Eliminar Usuario}
\begin{tabular}{|ll|}
\hline
\multicolumn{1}{|l|}{\textbf{Nombre del Caso de Uso}}                                                & \emph{Eliminar Usuario}                                             \\ \hline
\multicolumn{1}{|l|}{\textbf{Actores}}                                              & \emph{Administrador, BBDD}                                                             \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Descripción:}El usuario administrador podrá dar de baja a un conductor \\ \\ \textbf{Precondiciones:}
\\
\quad $\bullet$ Contar con credenciales de Administrador \\
\quad $\bullet$ Que exista una entrada del conductor a eliminar
\end{tabular}} \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Entradas:}\\
\quad $\bullet$ ID del conductor\\

\end{tabular}}                                                    \\ \hline
\end{tabular}

\end{table}



\begin{table}[h]
\centering
\caption{Caso de Uso 05 }
\begin{tabular}{|ll|}
\hline
\multicolumn{1}{|l|}{\textbf{Nombre del Caso de Uso}}                                                & \emph{Confirmar Incidencia}                                             \\ \hline
\multicolumn{1}{|l|}{\textbf{Actores}}                                              & \emph{Administrador, BBDD}                                                             \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Descripción:}El administrador podrá confirmar las incidencias \\ \\ \textbf{Precondiciones:}
\\
\quad $\bullet$ Contar con credenciales de Administrador \\
\quad $\bullet$ Haber inciado sesión previamente \\
\end{tabular}} \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Entradas:}\\
\quad $\bullet$ Correo \\
\quad $\bullet$ Contraseña\\\end{tabular}}                                                    \\ \hline
\end{tabular}

\end{table}

\begin{table}[h]
\centering
\caption{Caso de Uso 07 }
\begin{tabular}{|ll|}
\hline
\multicolumn{1}{|l|}{\textbf{Nombre del Caso de Uso}}                                                & \emph{Visualizar Incidencia}                                             \\ \hline
\multicolumn{1}{|l|}{\textbf{Actores}}                                              & \emph{Administrador, BBDD}                                                             \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Descripción:}El administrador podrá reproducir un video dónde se muestre el momento en que ocurrió la incidencia \\ \\ \textbf{Precondiciones:}
\\
\quad $\bullet$ Contar con credenciales de administrador
\quad $\bullet$ Haber seleccionado una incidencia
\end{tabular}} \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Entradas}\\
\quad $\bullet$ ID incidencia\end{tabular}}                                                    \\ \hline
\end{tabular}

\end{table}


\begin{table}[h]
\centering
\caption{Caso de Uso 07 - Recuperar Contraseña}
\begin{tabular}{|ll|}
\hline
\multicolumn{1}{|l|}{\textbf{Nombre del Caso de Uso}}                                                & \emph{Recuperar Contraseña}                                             \\ \hline
\multicolumn{1}{|l|}{\textbf{Actores}}                                              & \emph{Administrador, BBDD}                                                             \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Descripción:}El administrador podrá recuperar contraseña en caso de olvidarla \\ \\ \textbf{Precondiciones:}
\\
\quad $\bullet$ Contar con credenciales de administrador

\end{tabular}} \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Entradas}\\
\quad $\bullet$ Email\\
\quad $\bullet$ Nueva Contraseña

\end{tabular}}                                                    \\ \hline
\end{tabular}

\end{table}


\begin{table}[h]
\centering
\caption{Caso de Uso 08 - Visualizar Ubicación en Tiempo Real }
\begin{tabular}{|ll|}
\hline
\multicolumn{1}{|l|}{\textbf{Nombre del Caso de Uso}}                                                & \emph{Visualizar Ubicación en Tiempo Real}                                             \\ \hline
\multicolumn{1}{|l|}{\textbf{Actores}}                                              & \emph{Administrador, Módulo de Comunicaciones}                                                             \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Descripción:}El administrador podrá visualizar la ubicación en tiempo real de los conductores registrados \\ \\ \textbf{Precondiciones:}
\\
\quad $\bullet$ Contar con credenciales de Administrador\\
\quad $\bullet$ Haber iniciado sesión previamente
\end{tabular}} \\ \hline
\multicolumn{2}{|l|}{\begin{tabular}[c]{p{0.7\linewidth}@{}l@{}}\textbf{Entradas:}\\
\quad $\bullet$ ID del conductor
  \end{tabular}}                                                    \\ \hline
\end{tabular}

\end{table}

\end{itemize}





\clearpage
\section{Capítulo IV: Diseño}

\subsection{Diseño del Módulo Central de Procesamiento}

\subsubsection{Diseño de la Unidad Contenedora de Procesamiento}

Para el diseño de la unidad contenedora del módulo de procesamiento, se tomaron en cuenta los elementos físicos que estarán dentro de la unidad y sus respectivas medias. Cabe mencionar que los elementos que respectan al modelo del ordenador, el modelo de la cámara, el modelo del zumbador y el modelo de la microSD fueron previamente seleccionados en base a los requerimientos del sistema. 
\\
Elementos físicos que contendrá la unidad:

\begin{itemize}

\item Raspberry Pi 4 Modelo B\\
De acuerdo con las especificaciones físicas de la Raspberry Pi 4 Modelo B se tiene las siguientes medidas en milímetros:\\
Dimensiones 85 x 53mm. 
\begin{center}
  \includegraphics[scale=.4]{imagenes/Espeificaciones fisicas Raspberry Pi}
\captionof{figure}{Especificaciones Físicas}
 \label{fig:scaraindust}
\end{center}

\item Zumbador Pasivo KY-006\\
Dimensiones 18 x 15mm. 
\begin{center}
  \includegraphics[scale=.2]{imagenes/KY-006}
\captionof{figure}{Zumbador Pasivo KY-006}
 \label{fig:scaraindust}
\end{center}

\item Rasperry Camera Module V2\\
Dimensiones de la placa: 38 x 38mm.

\begin{center}
  \includegraphics[scale=.4]{imagenes/V2}
\captionof{figure}{Raspberry Camera Module V2}
 \label{fig:scaraindust}
\end{center}
 

\item Cable macho-hembra\\

\begin{center}
  \includegraphics[scale=.4]{imagenes/Jumpers}
\captionof{figure}{Jumpers}
 \label{fig:scaraindust}
\end{center}

Se utilizarán 2 cables macho-hembra para la conexión del zumbador pasivo hacia los pines GND y Vcc del Raspberry Pi 4. 
Largo 10 cm. 

\item Micro SD\\  
Dimensiones: 15 x 11 x 1 mm. 

\begin{center}
  \includegraphics[scale=.5]{imagenes/MicroSD}
\captionof{figure}{Micro SD}
 \label{fig:scaraindust}
\end{center}
\newpage
\item \textbf{RasperryPi 3G/4G/ LTE Base HAT}

\begin{center}
  \includegraphics[scale=.4]{imagenes/sixfabhat}
\captionof{figure}{RasperryPi 3G/4G/ LTE Base HAT}
 \label{fig:scaraindust}
\end{center}

Este HAT celular proporciona una conexión de datos simplificada para proyectos de IoT remotos, en el campo, en todo el mundo, en todas partes. Comience a usar una conexión LTE de alta velocidad con bajo consumo de energía, además de contar con todo el software necesario para desarrollar en una  Raspberry Pi.

\item \textbf{LE 910Cx Mini PCIe Series Linux}

\begin{center}
  \includegraphics[scale=.7]{imagenes/LE910}
\captionof{figure}{LE 910Cx Mini PCIe Series Linux}
 \label{fig:scaraindust}
\end{center}


Los módulos Mini PCIe (mPCIe) de la serie LE910Cx son
optimizadas para redes LTE de baja categoría y están disponibles
en modo único de LTE o con opciones de respaldo 3G/2G.

\newpage
\item \textbf{LTE Main Diversity GNSS Triple Port u.FL Antenna de 100mm}

\begin{center}
  \includegraphics[scale=.4]{imagenes/lteantena}
\captionof{figure}{LTE Main Diversity GNSS Triple Port u.FL Antenna de 100mm}
 \label{fig:scaraindust}
\end{center}


Antenas LTE principal y Diversity combinadas con una antena GNSS en una sola antena formada. Ajuste directo para el módulo Mini PCIe LTE de Quectel EC25, Telit LE910C1 y Telit LE910C4.

\end{itemize}

\newpage

Tomando en cuenta las medidas anteriormente mencionadas, se decidió utilizar un modelo de contenedor para rasperry diseñado por Sixfab.

\begin{center}
  \includegraphics[scale=.3]{imagenes/unidad_contenedoras}
\captionof{figure}{Vistas de la Unidad Contendora Sixfab \cite{sixfab}}
 \label{fig:scaraindust}
\end{center}
 

\begin{center}
  \includegraphics[scale=.5]{imagenes/unidad_contenedoral}
\captionof{figure}{Unidad Contenedora del Módulo Central de Procesamiento \cite{sixfab}}
 \label{fig:scaraindust}
\end{center}
 


\newpage
\subsubsection{Diseño del Submódulo de Visión Artificial}



\begin{center}
  \includegraphics[scale=.42]{imagenes/flujo_vision}
\captionof{figure}{Puntos de referencia}
 \label{fig:landmark}
\end{center}



La cámara digital capturará la imagen en tiempo real a una resolución de 640x480 pixeles a 30 cuadros por segundo. Esto debido a que dicha es la resolución mínima que la cámara digital seleccionada permite realizar el streaming de video. Dado que se busca un ahorro de recursos de procesamiento, utilizar una mayor resolución o tasa de cuadros por segundo podría resultar en el funcionamiento ineficaz en los procesos de los distintos módulos.
Para la detección de rostro, se utilizarán la librería de Cascadas Haar \emph{haarcascade\_frontalface\_alt.xml} ofrecida por OpenCV. Para la detección de ojos, se utilizará la librería \emph{haarcascade\_eye\_tree\_eyeglasses.xml},  que ofrece datasets para poder detectar ojos incluso con el uso de anteojos. Posteriormente se utilizará un modelo de red neuronal convolucional previamente entrenado con el datasets EyesClosed/CNN  que cuenta con un directorio de prueba y otro de entrenamiento. La red neuronal convolucional determinará si el conductor se encuentra con los ojos abiertos o cerrados. En caso de encontrarse con los ojos cerrados se inciará un contador. Si este contador llega a los 4 segundos de detectar ojos cerrados el sistema determinará que el conductor presenta un caso de somnolencia y se activará la alama para alertar al conductor. Posteriormente se realizará un reporte de incidencia que incluirá datos del conducto y de la incidencia cómo: fecha, hora y ubicación, así como un videoclip menor a 1 minuto que muestre el momento en que se detectó la incidencia. El sistema continuará activando la alerta hasta que se detecte un cambio en el estado de los ojos (de cerrados a abiertos). Finalmente, el reporte de incidencia será enviado a la Estación Base para su posterior revisión. 



\begin{itemize}


\item \textbf{Puntos de Referencia}

\begin{center}
  \includegraphics[scale=.42]{imagenes/landmark}
\captionof{figure}{Puntos de referencia}
 \label{fig:landmark}
\end{center}



A su vez, se utilizarán puntos de referencia con la ayuda de el software OpenCV y el modelo iBUG 300-W para delimitar la región de interés de la boca.

En la siguiente tabla se muestra la delimitación y agrupación de los puntos de interés, tales como: ojo derecho, ojo izquierdo y boca. De este modelo de detección de rostro, solo serán utilizados el grupo de 48 a 67, que delimitarán la región de la boca.
\begin{center}
\begin{table}[h]
\centering
\begin{tabular}{|l|c|}
\hline
Partes        & \multicolumn{1}{l|}{Puntos de Referencia} \\ \hline
Boca          & {[}48-67{]}                               \\ \hline
Ojo Derecho   & {[}36-41{]}                               \\ \hline
Ojo Izquierdo & {[}42-46{]}                               \\ \hline
\end{tabular}
\caption{\label{tab:landmakrs} Agrupación de Puntos de Referencia}
\end{table}
\end{center}


\item \textbf{Mouth Opening Ratio}


Debido a que bostezar es un signo de cansancio, se propone medir el tamaño y la forma de la boca es necesario para identificar un bostezo. Para esto, se utilizara el \emph{Mouth Opening Ratio} que es un método que utiliza puntos de referencia para medir la apertura de la boca. Entre más grande sea este valor, más es la aperatura de la boca, por lo tanto cumple con las características de un bostezo.

\begin{center}
  \includegraphics[scale=.5]{imagenes/MOR}
\captionof{figure}{\emph{Mouth Opening Ratio}}
 \label{fig:landmark}
\end{center}

La formula general para calular el \emph{MOR} es la siguiente:
\begin{equation}
MOR = \frac{\left \|p_{2}-p_{8}  \right \| +\left \|p_{3}-p_{7}  \right \|+\left \| p_{4}-p_{6} \right \|}{2\left \| p_{1}-p_{5}\right \|}
\end{equation}

Utilizando nuestros puntos de referencia, se podrá calcular el MOR de la siguiente manera:

\begin{equation}
MOR = \frac{\left \|P49-P59  \right \| +\left \|P51-P57  \right \|+\left \| P53-P55 \right \|}{2\left \| P48-P54\right \|}
\end{equation}


\end{itemize}


\newpage
\subsection{Diseño del Módulo de Comunicaciones}
Para el diseño de este módulo se tiene contemplado ejecutar dos procesos asíncronos, es decir, que se ejecutan al mismo tiempo o de manera paralela.

A continuación se muestra el diagrama de Flujo del Módulo de Comunicaciones
\begin{center}
  \includegraphics[scale=0.6]{imagenes/DF-modCom}
\captionof{figure}{Diagrama de Flujo del Módulo de Comunicaciones}
 \label{fig:DF-modCom}
\end{center}
\newpage
La ubicación del conductor será obtenida por el Módulo de Telemetría cada 10 segundos, esto con la intención de no consumir demasiados recursos de procesamiento y energía. Posteriormente será enviada a la Estación Base utilizando la interfaz SixFab-LTE. En caso de no contar con cobertura que permita la conexión a la estación base, la ubicación del  conductor será guardada en el almacenamiento interno de la Unidad de Procesamiento Central. Se realizaran handhshakes a la espera de respuesta de la Estación Base hasta que se obtenga una respuesta de enlace, posteriormente enviarán la o las ubicaciones almacenadas temporalmente hacia  a la Estación Base.



\begin{figure}
  \includegraphics[scale=0.5]{imagenes/DG-modCom}
\captionof{figure}{Diagrama Actividades del Módulo de Comunicaciones}
 \label{fig:DG-modCom}
\end{figure}



\newpage
\subsection{Diseño de la Estación Base}

Con base en los requerimientos, se plantea realizar el diseño de la arquitectura del Módulo de Estación Base, integrando el Módulo de Procesamiento Central. El cual hará énfasis en la organización y comunicación de los elementos que lo conforman.  \\

El siguiente diagrama muestra la arquitectura del sistema de Estación base, el cual se compone de las interacciones de los elementos que permitirán al usuario acceder e interactuar con la aplicación web. El diagrama también muestra la participación del Módulo de Procesamiento Central ya que el registro de incidencias y el envío del video de incidencia serán realizados por dicho módulo. La información de los reportes de incidencias y el registro de los conductores serán almacenados en Mongo DB, mientras que los videos de incidencia se almacenarán en Amazon S3. Las credenciales de los Usuarios Administradores que tendrán permitido acceder a la aplicación se almacenarán en Amazon Cognito. Para la aplicación web, el \emph{backend} será desarrollado en node.js mientras que el \emph{frontend} será desarrollado en React, posteriormente los archivos se almacenarán en un repositorio dentro de Github. La aplicación web será alojada y desplegada desde AWS Amplify, lo cual le permitirá al cliente acceder a la aplicación desde una URL.   


\begin{center} 
  \includegraphics[scale=.5]{imagenes/DisenoMEB} 
\captionof{figure}{Arquitectura del Módulo de Estación Base} 
\label{fig:DisenoMEB} 
\end{center} 




\newpage
\subsubsection{Diseño de la Aplicación Web}

Para el diseño y desarrollo de la Aplicación web, se  decidió utilizar el lenguaje Javascript, ya que este cuenta con las herramientas y/o frameworks que mejor se adaptan a los requisitos previamente definidos.
A su vez, se decidió utilizar el NodeJs para el sistema backend.

Node.js, es un entorno en tiempo de ejecución multiplataforma basado en JavaScript. Este es controlado por eventos, permitiendo establecer y gestionar múltiples conexiones al mismo tiempo. Gracias a esta característica, el bloqueo de procesos no existe. NodeJs trabaja fundamentalmente bajo dos características: \emph{asincronía}, que permite la ejecucción de varios procesos al mismo tiempo, y \emph{Entrada/salida sin bloqueo}, que significa poder trabajar con múltiples solicitudes sin bloquear un hilo para una sola solicitud. \cite{NodeJs}

NodeJs es capaz de manejar distintas peticiones sin que tener que esperar a que una petición sea respondida para continuar con la siguiente petición. De ahí la elección de este entorno de Javascript para el desarrollo de la aplicación web.\\

A continuación se muestran diversos diagramas de secuencias que describen los procesos de los requerimientos definidos en la sección de Análisis.


\begin{center}
  \includegraphics[scale=.6]{imagenes/sec_reporte_incidencia}
\captionof{figure}{Diagrama de Secuencia Detalle Reporte Incidencia }
 \label{fig:scaraindust}
\end{center}

El Administrador podrá consultar el reporte de incidencia de cada uno de los conductores. Accediendo a la base de de datos de MongoDB
 

\begin{center}
  \includegraphics[scale=.7]{imagenes/sec_ubicacion}
\captionof{figure}{Diagrama de Secuencia Consultar Ubicación}
 \label{fig:scaraindust}
\end{center}

De igual manera, el Administrador podrá consultar la ubicación en tiempo real del conductor.
 
\begin{center}
  \includegraphics[scale=.6]{imagenes/sec_rcontrasena}
\captionof{figure}{Diagrama de Secuencia Recuperar Contraseña }
 \label{fig:scaraindust}
\end{center}

También podrá recuperar su contraseña en caso de que esta sea olvidada.

\begin{center}
  \includegraphics[scale=.6]{imagenes/sec_confirmar}
\captionof{figure}{Diagrama de Secuencia Confirmar Incidencia}
 \label{fig:scaraindust}
\end{center}

Para evitar falsos positivos, el Administrador podrá confirmar una incidencia una vez mirando el videoclip del incidente.

\begin{center}
  \includegraphics[scale=.6]{imagenes/sec_perfil}
\captionof{figure}{Diagrama de Secuencia Consultar Perfil}
 \label{fig:scaraindust}
\end{center}
El Administrador podrá consultar el perfil de cada conductor. 

\begin{center}
  \includegraphics[scale=.6]{imagenes/sec_registrar}
\captionof{figure}{Diagrama de Secuencia Registrar Conductor }
 \label{fig:scaraindust}
\end{center}

\begin{center}
  \includegraphics[scale=.6]{imagenes/sec_modificar}
\captionof{figure}{Diagrama de Secuencia Modificar Conductor}
 \label{fig:scaraindust}
\end{center}

En caso de que los datos del conductor sean incorrectos, el administrador podrá modificarlos.

\begin{center}
  \includegraphics[scale=.6]{imagenes/sec_eliminar}
\captionof{figure}{Diagrama de Secuencia Eliminar Conductor }
 \label{fig:scaraindust}
\end{center}

El Administrador también tendrá la opción de dar de baja a un conductor.

\begin{center}
  \includegraphics[scale=.6]{imagenes/sec_estado}
\captionof{figure}{Diagrama de Secuencia Estado de los Periféricos }
 \label{fig:scaraindust}
\end{center}

La aplicación web indicará si alguno de los periféricos no se encuentra en correcto funcionamiento, lanzando una alerta indicando el número de Unidad y a qué conductor pertenece.

A continuación se muestra el diseño propuesto de cada una de las vistas que tendrá la aplicación web.

\begin{center}
  \includegraphics[scale=.3]{imagenes/login}
\captionof{figure}{Página Inicio de Sesión }
 \label{fig:login}
\end{center}
En la Figura \ref{fig:login} se observa la página dónde el Administrador podrá iniciar sesión ingresando su correo y su contraseña.
 
\begin{center}
  \includegraphics[scale=.3]{imagenes/homescreen}
\captionof{figure}{Página Principal}
 \label{fig:homescreen}
\end{center}

En la Figura \ref{fig:homescreen} se muestra la página principal, dónde se muestran la lista de las incidencias, dónde cada una tendrá un estado de confirmada, rechazada, o pendiente de revisión. También se mostrarán una lista de todos los conductores para poder acceder al perfil de cada uno.

\begin{center}
  \includegraphics[scale=.3]{imagenes/profile}
\captionof{figure}{Página Perfil del Conductor }
 \label{fig:profile}
\end{center}

En la Figura \ref{fig:profile} se aprecia la página de perfil del conductor, que mostrará sus datos personales, así como una lista de todas las incidencias acumuladas.

\begin{center}
  \includegraphics[scale=.3]{imagenes/incident}
\captionof{figure}{Página Detalle de Incidencia }
 \label{fig:incident}
\end{center}

En al Figura \ref{fig:incident}, se puede observar la página desde dónde el administrador podrá revisar el videoclip de las incidencias de cada conductor. También cuenta con las opciones de confirmar o rechazar la incidencia dependiendo de cuál sea el caso.

\begin{center}
  \includegraphics[scale=.3]{imagenes/location}
\captionof{figure}{Página Ubicación en Tiempo Real }
 \label{fig:location}
\end{center}
 
 
En la Figura \ref{fig:location} se muestra la página web dónde el Administrador podrá consultar la ubicación de un conductor en tiempo real.

\newpage
\subsubsection{Diseño de la Base de Datos}


\textbf{Elección del manejador de Base de Datos}


\begin{itemize}

\item \textbf{MongoDB}

Debido a la escalabilidad horizontal, facilidad de implementación, bajo coste y flexibilidad que ofrece los gestores de bases de datos NoSQL para adaptarse a las necesidades del proyecto, se optó por la elección de un gestor de este tipo. Además, se contemplaron las posibles modificaciones dentro del modelado de la base de datos, las cuales tendrán como motivo, cumplir los requisitos del sistema y presentar la información necesaria en la aplicación web. Estas modificaciones (en caso de ser necesarias) podrán ser fácilmente aplicadas usando un SGBD NoSQL ya que ofrecen una mayor facilidad de realizar cambios dentro del esquema a diferencia de un SGBD SQL.  \\

Dentro de los SGBD NoSQL se eligió MongoDB, ya que la aplicación web será desarrollada utilizando como base el lenguaje JavaScript y el framework Node.js para realizar el \emph{backend} de la aplicación. Por lo cual MongoDB, se integrerá de manera funcional en  el desarrollo del proyecto. Además, MongoDB es de código abierto, y es una herramienta gratuita hasta cierto punto, por lo cual no se requerirá una licencia para la implementación. Otra característica importante es que es una base de datos multiplataforma, esto nos permitirá registrar información desde el sistema operativo Linux, que se ocupará en la Raspberry Pi y por otro lado se ocupará Windows en la aplicación web para la inserción, modificación, lectura y eliminación de los datos en la base de datos.\cite{mongo}

MongoDB utiliza "documentos" para registrar los datos, estos documentos son almacenados dentro de las colecciones, las cuales, en una base de datos relacional se asemeja a una tabla. Las bases de datos en MongoDB están conformadas por una o más colecciones de documentos.  

MongoDB almacena registros de datos como documentos BSON. BSON es una representación binaria de documentos JSON , aunque contiene más tipos de datos que JSON.   

Un registro en MongoDB es un documento, que es una estructura de datos compuesta por pares de campo y valor. Los documentos MongoDB son similares a los objetos JSON. Los valores de los campos pueden incluir otros documentos, matrices y matrices de documentos. 

\begin{center}
  \includegraphics[scale=.7]{imagenes/EstructuraDocumentoMongoDB}
\captionof{figure}{Estructura de un Documento en MongoDB}
 \label{fig:EstructuraDocumentoMongoDB}
\end{center}

Basado en la estructura NOSQL de MongoDB, se propone el siguiente modelo para la base de datos, la cual contará con dos colecciones: Conductores e Incidencias. Cabe mencionar que en dicho modelo no se contempla a los administradores, debido a que se utilizará el sistema de Amazon Cognito, que ofrece herramientas de autenticación, registro, verificación e inicio de sesión para el usuario. 

\begin{center}
  \includegraphics[scale=.3]{imagenes/ModeladoBD}
\captionof{figure}{Modelo propuesto para la base de datos en MongoDB}
 \label{fig:ModeloBD}
\end{center}

El modelo de documento para la colección Conductores, se usará para registrar el nombre y apellido de cada conductor, así mismo se contabilizará el número de incidencias que presenté cada uno de ellos, el contador del conductor en marcha aumentará cada vez que el Módulo Central de Procesamiento envié un reporte de incidencia a la base de datos. Si el Usuario Administrador del Módulo de la Estación Base revisa el video de la incidencia y lo cataloga como Descartar entonces se restará la incidencia, si esta es catalogada como Confirmar, el contador permanecerá igual.  Es importante mencionar que el registro de cada conductor se realizará desde la Aplicación Web. A continuación, se muestran los campos y un ejemplo de los valores que pueden ser ingresados dentro del documento de registro de conductores. 

\begin{center}
  \includegraphics[scale=.9]{imagenes/ModeloConductores}
\captionof{figure}{Documento de Registro de Conductores}
 \label{fig:DocumentoConductores}
\end{center}

El modelo de documento para la colección Incidencias, se usará para registrar el Reporte de Incidencia que presente un conductor, el cual será enviado desde el Módulo Central de Procesamiento, por tanto, se realizará una consulta previa a la colección Conductores para obtener el id, nombre y apellido del conductor en marcha. Posteriormente se realizará el reporte de la incidencia, el cual contendrá el Id del conductor, la fecha y hora de la incidencia, el nombre y apellido del conductor, y el estado de incidencia, este último muestra si la incidencia fue catalogada como descartada o confirmada por parte del Usuario Administrador después de revisar el video de la incidencia. Como se mencionó anteriormente, MongoDB permite anidar documentos, por lo que, dentro de este documento se encontrará anidado un segundo documento llamado Detalles, el cual registrará la Ubicación donde sé detectó la incidencia y la URL donde se encontrará almacenado el video.  


\begin{center}
  \includegraphics[scale=.9]{imagenes/ModeloIncidencias}
\captionof{figure}{Documento de registro de Incidencias}
 \label{fig:DocumentoIncidencias}
\end{center}

Cabe señalar que los anteriores modelos muestran el campo Id, sin embargo, MongoDB asigna automáticamente un Id, si el id no es especificado, esto lo realiza cada vez que se crea un nuevo documento dentro de una colección, el cual es un valor hexadecimal de 12 bytes representado en 24 caracteres. Por tanto, se utilizará el id que proporcione Mongo DB en los documentos. \\


\item \textbf{Amazon Cognito}

Es una suite de herramientas que ofrece autenticación, autorización y administración de usuarios para aplicaciones móviles o web. Amazon Cognito utiliza dos componentes principales: los grupos de usuarios y grupos de identidades. Los grupos de usuarios se tratan de directorios que proporcionan a los usuarios de las aplicaciones opciones para inscribirse e iniciar sesión. Por otro lado, los grupos de indentidades conceden a los usuarios acceso a otros servicios de \emph{Amazon Web Services}

A continuación se muestra el funcionamiento de Amazon Cognito

\begin{center}
  \includegraphics[scale=.5]{imagenes/cognito}
\captionof{figure}{Documento de registro de Incidencias}
 \label{fig:DocumentoIncidencias}
\end{center}

\begin{enumerate}
\item En primer lugar, el usuario inicia sesión a través de su respectivo grupo de usuarios y recibe \emph{tokens} de grupos de usuario despuées de una autenticación correcta.
\item Después, la aplicación intercambia dichos tokens del grupo de usuarios por las credenciales de AWS mediante un grupo de identidades.
\item Finalmente, el usuario puede utilizar estas credenciales de AWS para obtener acceso a otros servicios como Amazon S3.
\end{enumerate}

Amazon Cognito se encuentra disponible en varias regiones alrededor del mundo. 


\item \textbf{Amazon S3 (\emph{Simple Storage Service})}

Amazon S3, es un servicio de almacenamiento de objetos en la nube. Es utilizado para almacenar datos en la nube de una forma segura, eficienta y escalable. Este servicio utiliza elementos llamados \emph{buckets}, que se encargan de almacenar objetos. Un objeto es un archivo o cualquier metadato que describa dicho archivo. Para almacenar datos en S3, primero se debe especificar el nombre de un bucket y la región dónde se planea que opere la aplicación. Esto con la intención de que el acceso a los datos se realice de manera eficiente.




\end{itemize}



\newpage
\section{Conclusiones}
En un principio, se tenía contemplado utilizar la red LoRaWan para la comunicación y transferencia de archivos. Sin embargo, después de las actividades investigación, nos dimos cuenta de que esta opción no era viable, ya que el \emph{bitrate} soportado por LoRaWan es insuficiente para la transferencia de archivos multimedia, que es una parte fundamental de nuestro sistema. Por tanto, se optó por utilizar la interfaz de LTE-M, una opción más costosa, pero que cumple los requisitos de una alta tasa de transferencia, así como una buena integración con la Rasperry Pi 4.\\

En el caso del Submódulo de Procesamiento de imágenes, se tenía contemplado desarrollarlo de manera separada del submódulo de \emph{machine learning } pero después de haber realizado un análisis más profundo, se decidió integrarlo dentro de este mismo. Esto para el ahorro de recursos de procesamiento y conseguir una mejor comunicación entre procesos. En un siguiente reporte, se terminará por diseñar la Red Neuronal Convolucional, así como el diseño del Módulo de Telemetría y de la Estación Base.\\

Pará el diseño de la unidad de almacenamiento se obtuvo un bosquejo prototipo, sin embargo, se tiene contemplado rediseñar el modelo con el fin de mejorar y adaptarla los cambios del sistema a futuro.


\newpage
\section{Referencias}
%\bibliographystyle{apacite}

\begin{thebibliography}{100} %10 significa el número máximo de items
%Aquí ponga la bibliografía y referencias usadas

%Artículo:

\bibitem{WHO} World Health Organization. "Global status report on road safety 2018". World Health Organization (WHO). http://www.who.int/publications/i/item/9789241565684 (accedido el 26 de enero de 2022). 

\bibitem{IMT} Paez Mario, Abarca Emilio. \emph{Herramientas para la seguridad en la movilidad, modelos predictivos de somnolencia en conductores}, Instituto Mexicano del Transporte, Septiembre 2017

\bibitem{TastreoSatelital} Rastreo satelital de vehículos: ¿qué es mejor que el GPS tradicional? (s/f). Beetrack.com. Recuperado de https://www.beetrack.com/es/blog/rastreo-satelital-de-vehiculos 

\bibitem{Sistemasdesomnolencia}  "Sistemas de detección de somnolencia en conductores:Inicio, desarrollo y futuro", Revista Ingeniería y Región., vol. 13, n.º 1, pp. 159?168, 2015. Disponible: https://journalusco.edu.co/index.php/iregion/article/view/717/1372 


\bibitem{sixfab} Sixfab. "Raspberry Pi IP54 Outdoor Project Enclosure - Sixfab". Sixfab. https://sixfab.com/product/raspberry-pi-ip54-outdoor-iot-project-enclosure/ (accedido el 2 de enero de 2023).

\bibitem{kendall} Kenneth E. Kendall, Julie E. Kendall, \emph{Análisis y Diseño de Sistemas}, Octava Edición , Pearson Educación de México, 2011



\bibitem{viola}Viola P.; Jones M, \emph{Rapid Object Detection
using a Boosted Cascade of Simple Features}. IEEE International Conference on Computer Vision and Pattern Recognition,2001


\bibitem{CoberturaNacional} https://www.nperf.com/es/map/MX/-/2004799.Telcel-Mobile/signal/


\bibitem{algoritmosdeaprendizaje} https://www.alteryx.com/es-419/glossary/supervised-vs-unsupervised-learning\#:~:text=Hay\%20una\%20diferencia\%20clave\%20entre,etiquetados\%20con\%20la\%20respuesta\%20correcta

\bibitem{filtroshaar} 

https://carlosjuliopardoblog.wordpress.com/2017/05/12/filtros-haar-deteccion-de-rostros/ 

\bibitem{aprendizajeprofundo}  

https://www.oracle.com/mx/artificial-intelligence/machine-learning/what-is-deep-learning/ 


\bibitem{conapra} M. Paez y Emilio Abarca. \emph{Resumen Boletines}, Instituto Mexicano del Transporte.
https://imt.mx/resumen-boletines.html?IdArticulo=449\&amp;IdBoletin=168 (accedido 
el 18 de marzo de 2022).

\bibitem {NodeJs} Jonathan Wexler, \emph{Get Programming with Node.js}, Manning, 2019

\bibitem {js} Marjin Haverbeke \emph{Eloquent Javascript}, Third Edition, No Starch Press, 2020


\bibitem {AWS} Amazon, \emph{Amazon Amplify}, https://aws.amazon.com/es/amplify/


\bibitem {vision} David A. Forsyth, Jean Ponce, \emph{Computer Vision a Modern Approach}, Second Edition, Pearson, 2012

\bibitem {mongo} Kyle Banker, \emph{MondoDB in Action}, Second Edition, Manning, 20216

\bibitem{Referencia0} Fernando Berzal, \emph{ Redes Neuronales y Deep Learning}, Granada, 2018

\bibitem{python} Irv Kalb, \emph{Object-Oriented Python}, Primera Edición ,No Starch-Press, 2021
%Libro
\bibitem{Referencia2}
V.Moret Bonillo, \emph{Fundamentos de Inteligencia Artificial}, Segunda Edición,Santiago de Compostela: Universidad de La Coruña Servicio de Publicaciones, 2005.

\bibitem{Referencia3} Ian Sommerville, \emph{Ingeniería de Software}, Novena Edición , Pearson Eduación de México, 2011



\bibitem{Referencia5} Aurélien Géron, \emph{Hands-On Machine Learning with Scikit-Learn, Keras, and Tensorflow}, Segunda Edición , O'Reilly, 2009


\bibitem{Referencia7} Kurt Demaagd, Anthony Oliver, Nathan Oostendorp y Katherine Scott \emph{Practical Computer Vision with OpenCV}, Tercera Edición, O'Reilly, 2017

\bibitem{Referncia8}Cuno Plister, \emph{Getting Started with Internet of Things},Primera Edición, O'Reilly, 2011

\bibitem{Referencia9} Vilca Espinoza, R.A, \emph{Influencia de un sistema de geolocalización en el control y monitoreo de vehículos con dispositivos GPS en una empresa logística}, 2007

\bibitem{Referencia10} S. Pachouly, N. Bhondve, A. Dalvi, V. Dhande y N. Bhamare. "Driver drowsiness detection using machine learning with visual behaviour". https://ijcrt.org/papers/IJCRT2006408.pdf (accedido el 2 de noviembre de 2022).

\bibitem{Referencian4} J. A. Castillo. \emph{WLAN: Qué es, definición, estándar 802.11 y diferencias con LAN.}
https://www.profesionalreview.com/2020/03/07/wlan-que-es/ (accedido el 2 de noviembre de
2022).

\bibitem{Referencian5}Tarify.Win!\emph {Red WWAN ¿Qué es, para qué sirve y cómo
funcionan?}https://tarify.win/definiciones/red-wwan/


\bibitem{Referencian6}La Rosa, A. (2021, 13 julio). \emph{LPWAN como base de comunicaciones para IoT} Pandora 
FMS-The Monitoring Blog. Recuperado 8 de mayo de 2022, de https://pandorafms.com/blog/es/que-eslpwan/?msclkid=08006fc5cf4611ecbc00aa3b275ed2b5

\bibitem{Referencian7}\emph{LTE-M, el despegue esperado para IoT. Hablemos de empresas.} https://hablemosdeempresas.com/grandes-empresas/lte-m-despliegue-soluciones-iot/

\bibitem{Referencian8}S{\'a}nchez Rosado, David,\emph{NB-IoT tecnolog{\'\i}as celulares narrow-band: an{\'a}lisis pr{\'a}ctico de las soluciones de Telef{\'o}nica y Vodafone},2019


\end{thebibliography}

\end{document}

\newpage
\section{Anexos}

