\documentclass[12pt,letterpaper]{article}
\usepackage[spanish]{babel}
\usepackage{amsmath}
\usepackage[latin1]{inputenc}
\usepackage{graphicx}
\usepackage{amssymb}
\usepackage{anysize}
\usepackage{array}
\usepackage{multicol}
\usepackage{lmodern}
\usepackage{adjustbox}
\usepackage{enumitem}
\usepackage{float}
\marginsize{2cm}{2cm}{1cm}{1cm}
\usepackage{fancyhdr}

\pagestyle{fancy}
\fancyhf{}
\fancyhead[L]{\footnotesize UPIITA}
%\fancyfoot[R]{\footnotesize Diseño}
\fancyfoot[R]{\thepage}
\fancyfoot[L]{\footnotesize Proyecto Terminal 2}
\renewcommand{\footrulewidth}{0.4pt}
\usepackage{graphics}
\usepackage{capt-of}
\usepackage[pdftex=false,colorlinks=true,plainpages=true,citecolor=blue,linkcolor=blue]{hyperref}
\setlength\parindent{0pt}
\usepackage[usenames]{color}
\usepackage{pdfpages}
\usepackage{float}
\usepackage{shapepar}

\begin{document}
\renewcommand{\tablename}{Tabla}
\renewcommand{\listtablename}{Índice de tablas}

\begin{titlepage}

\newcommand{\HRule}{\rule{\linewidth}{0.3mm}}

\includegraphics[scale=0.45]{imagenes/ipn}
\hspace{10cm}
\includegraphics[scale=0.15]{imagenes/upiita}
\\


\begin{center}


\textsc{\Large ``Sistema para el monitoreo, detección y alerta de somnolencia del conductor mediante visión artificial, comunicación inalámbrica y geolocalización''}\\[0.5cm]



\HRule \\[0.4cm]
{ \huge \bfseries Primer Reporte Parcial}\\[0.4cm]

\HRule \\[1.5cm]

\begin{center}

Lista de actividades
 

\begin{itemize}
\item Definir rutas del frontend
\item Diseño de rutas del backend  
\item Conexión Backend con Mongo DB
\item Sistema de acceso con credenciales
\item Creación de la base de datos no relacional
\item	Investigación de modelos de Redes Neuronales Convolucionales
\item Diseño de una red neuronal convolucional capaz de detectar ojos cerrados y abiertos

\end{itemize}

\end{center}


\begin{minipage}{0.4\textwidth}
\begin{flushleft} \large
\emph{\\Autores:}\\
Alan Eduardo Gamboa Del Ángel\\
Maite Paulette Díaz Martínez\\

%Grupo:4MM6\\
\end{flushleft}
\end{minipage}
\begin{minipage}{0.5\textwidth}
\begin{flushright} \large
\emph{Asesores:} \\
M.en C. Niels Henrik Navarrete Manzanilla\\
Dr. Rodolfo Vera Amaro\\

\end{flushright}
\end{minipage}

\vfill

30 de Noviembre 2022

\end{center}


\end{titlepage}
\newpage
\tableofcontents
\newpage
\listoffigures
\newpage
\listoftables

\newpage
\section{Definir rutas del frontend}

\subsection{Objetivo}
Definir e implementar las rutas que tendrá la aplicación, así como si serán públicas o privadas y la información que se desplegará en cada una de las mismas.




\subsection{Descripción}

\textbf{Rutas públicas vs rutas protegidas}

Cuando se habla de una ruta protegida en React, se referiere a programar un bloqueo en ciertas rutas a la cual se le restringe el acceso al usuario. Esto comunmente se realiza para la validación de inicio de sesión de usuarios. Sí el usuario no tiene una sesión iniciada, no podrá acceder a las rutas protegidas de la aplicación. Por otro lado, las rutas públicas son todas aquellas las cuales no requieren contar con una sesión iniciada, y pueden ser accesadas por cualquier tipo de usuario.


Como primer paso, se necesita crear un proyecto de React utilizando el siguiente comando:


\begin{center}
  \includegraphics[scale=0.5]{imagenes/create}
\captionof{figure}{Creación proyecto de react}
 \label{fig:MongoA} 
\end{center} 


Posteriomente, se realiza la instalación del moudelo \emph{React Router Dom} utilizando el siguiente comando:

\begin{center}
  \includegraphics[scale=0.5]{imagenes/router}
\captionof{figure}{Creación proyecto de react}
 \label{fig:MongoA} 
\end{center} 

Utilizando la librería \emph{useAuthenticator} ofrecida por el paquete de React Dom, crearemos un archivo de nombre \emph{RequireAuth.js} el cuál contendrá una función la cual se encargará de validar si existe una sesión iniciada previamente.

\begin{center}
  \includegraphics[scale=0.5]{imagenes/auth}
\captionof{figure}{Función RequireAuth}
 \label{fig:auth} 
\end{center} 

Posteriormente, se necesita contar con una página de Login, la cuál permitirá validar que se encuentre una sesión inciada por parte del usuario, para así poder acceder a las rutas protegidas.

\begin{center}
  \includegraphics[scale=0.6]{imagenes/loginjs}
\captionof{figure}{Componente Login}
 \label{fig:loginjs} 
\end{center} 


Para indicar a React, que se desea implementar una ruta protegida, se necesita ir al componente de dicha ruta e ingresar el siguiente código:


\begin{center}
  \includegraphics[scale=0.5]{imagenes/homejs}
\captionof{figure}{Ruta protegida del componente Home}
 \label{fig:homejs} 
\end{center} 

En dicho componente, se hace uso de las librerías \emph{useAuthenticator} y \emph{Authenticator} las cuales son ofrecidas por los servicios de Amazon Amplify. Se tendrá que hacer esto para todos los componentes que deseemos mantener como rutas protegidas.


Finalmente, dentro de nuestro componente \textbf{App.js}, crearemos una función que contendrá el directorio de rutas tanto públicas como protegidas:

\begin{center}
  \includegraphics[scale=0.5]{imagenes/routesjs}
\captionof{figure}{Directorio de rutas}
 \label{fig:routesjs} 
\end{center} 

Las rutas protedigas, estarán dentro de las etiquetas \textbf{<RequireAuth></RequireAuth>}, mientras que las públicas, irán dentro de las etiquetas \textbf{<Route></Route>}.


\subsection{Resultados}

Como resultado de todo lo anterior, tendrémos una página de Login que utilizando los servicios de AWS Amplify y Cognito, permitirá iniciar sesión así como registrar a nuevos usuarios.

\begin{center}
  \includegraphics[scale=0.4]{imagenes/loginpage}
\captionof{figure}{Página de Login}
 \label{fig:loginpage} 
\end{center} 

Si intentamos ingresar a las pa?inas de Conductores, Incidencias o Ubicacion, nos redigirá a la página de Login, debido a que estas páginas fueron definidas como rutas protegidas. Por lo tanto el usuario debe haber inciado sesión para poder acceder a las mismas.


\begin{itemize}
\item \textbf{Path:} "/\\ \textbf{Descripción:} En esta dirección se encontará la el formulario para poder iniciar sesión o registrarse

\item \textbf{Path:} "/home \\  \textbf{Descripción:} Esta dirección será la página principal de la aplicación dónde se mostrarán las incidencias más recientes así como una lista de todos los conductores

\item \textbf{Path:} "/conductor/\\ \textbf{Descripción:} Esta dirección mostrará el perfil del conductor de id correspondiente

\item \textbf{Path:} "/detalle\textunderscore incidencia \\ \textbf{Descripción:} Esta dirección mostrará cada incidencia mostrando detalles como hora, fecha, coordenadas

\item \textbf{Path:}  "/conductor/id/ubicacion \\ \textbf{Descripción:} En esta vista se mostrará la ubicación en tiempo real de cada conductor


\item \textbf{Path:} "/conductor/id/incidencias \\ \textbf{Descripción:} En esta vista se mostrará todas las incidencias registradas por cada conductor

\end{itemize}



\newpage
\section{Definir rutas del backend}

\subsection{Objetivo}
Crear las rutas mediante las que el cliente realizará las peticiones y tendrá acceso a las operaciones, así como su funcionamiento en cuanto a obtención de datos y comunicación con el resto de la aplicación.
\subsection{Descripción}

Para poder utilizar los servicios de Amazon Amplify, necesitamos dirigirnos al directorio root de nuestro proyecto y ejectutar el siguiente comando:

\begin{center}
  \includegraphics[scale=0.6]{imagenes/cli}
\captionof{figure}{Página web MongoDb Atlas. }
 \label{fig:MongoA} 
\end{center} 

Posteriormente, se necesita especificar la región en la cual queremos alojar nuestra aplicación web:

\begin{center}
  \includegraphics[scale=0.6]{imagenes/region}
\captionof{figure}{Página web MongoDb Atlas. }
 \label{fig:MongoA} 
\end{center} 


Utilizando un editor de código, se necesita especificar que estará utilizando el \emph{SDK} de Amazon Amplify:

\begin{center}
  \includegraphics[scale=0.55]{imagenes/sdk}
\captionof{figure}{Página web MongoDb Atlas. }
 \label{fig:MongoA} 
\end{center} 

Posteriormente, declaramos una aplicación de ExpressJs la cuál nos permitirá ejecutar entre otras cosas, peticiones HTTP para la comunicación con la base de datos.

\begin{center}
  \includegraphics[scale=0.55]{imagenes/expressjs}
\captionof{figure}{Página web MongoDb Atlas. }
 \label{fig:MongoA} 
\end{center} 



\subsection{Resultados}

\newpage
\section{Conexión Backend con Mongo DB}






\subsection{Objetivo}
Realizar la conexión de NodeJs con la base de datos MongoDb.

\subsection{Descripción}

Como primer paso, se debe ingresar a la página web \url{https:\\mongodb.com} y registrarse.

\begin{center}
  \includegraphics[scale=0.4]{imagenes/mongod}
\captionof{figure}{Página web MongoDb Atlas. }
 \label{fig:MongoA} 
\end{center} 

Después de haber iniciado sesión, daremos click al botón \emph{Create} para crear un cluster al cuál podremos conectarnos para utilizar los servicios de Mongo Atlas.

\begin{center}
  \includegraphics[scale=0.5]{imagenes/mongohome}
\captionof{figure}{Página Principal MongoDB}
 \label{fig:Mongoe} 
\end{center} 

Posteriormente, se seleccionarán los ajustes del cluster a crear, será un cluster compartido ya que esta opción es grátis.

\begin{center}
  \includegraphics[scale=0.5]{imagenes/shared}
\captionof{figure}{Página Creación de Cluster}
 \label{fig:Mongoi} 
\end{center} 

De igual manera, se mantendrán los valores por default en cuanto al almacenamiento y la versión de Mongo a utilizar.
\begin{center}
  \includegraphics[scale=0.5]{imagenes/storage}
\captionof{figure}{Página Creación de Cluster}
 \label{fig:Mongoo} 
\end{center} 



\begin{center}
  \includegraphics[scale=0.5]{imagenes/directory}
\captionof{figure}{Directorio del Backend}
 \label{fig:Mongou} 
\end{center} 


\begin{center}
  \includegraphics[scale=0.5]{imagenes/confi_server}
\captionof{figure}{Directorio del Backend}
 \label{fig:Mongox} 
\end{center} 

\begin{center}
  \includegraphics[scale=0.5]{imagenes/mongo_connect}
\captionof{figure}{Directorio del Backend}
 \label{fig:Mongof} 
\end{center} 



\subsection{Resultados}

\begin{center}
  \includegraphics[scale=0.5]{imagenes/conexion}
\captionof{figure}{Directorio del Backend}
 \label{fig:Mongon} 
\end{center} 




\newpage
\section{Sistema de acceso con credenciales}


\subsection{Objetivo}
Establecer los roles de cada tipo de usuario con sus respectivos permisos de acceso a la aplicación web utilizando Amazon Cognito
\subsection{Descripción}

Amazon Cognito funciona utilizando \emph{pools} de usuarios. Un pool de usuarios es un directorio almacenado en los servicios de Amazon. Los beneficios que ofrece estar registrado en un pool de usuarios de Amazon Cognito son los siguientes:



\begin{itemize}

\item Servicio de registro e inicio de sesión
\item Gestión del directorio de usuarios
\item Servicios de seguridad tales como verificación de dos pasos
\item Acceso a servicios de la suite de AWS	tales como S3 o Dynamodb




\end{itemize}


\textbf{Funcionamiento}


\begin{center}
  \includegraphics[scale=0.5]{imagenes/cognito}
\captionof{figure}{Directorio del Backend}
 \label{fig:cognito} 
\end{center} 


\begin{itemize}
\item Como primer paso el usuario inicia sesión a través de un grupo de usuarios y recibe tokens del grupo de usuarios después de un
autenticación exitosa.

\item Posteriormente la aplicación intercambia los tokens del grupo de usuarios por las credenciales de AWS a través de un grupo de identidades.

\item Finalmente, el usuario puede usar esas credenciales de AWS para acceder a otros servicios de AWS, como
Amazon S3 o DynamoDB.

\end{itemize}

\textbf{Implementación}

Para poder hacer uso de Amazon Cognito en nuestra aplicación debemos de introducir el siguiente comando:

\begin{center}
  \includegraphics[scale=0.7]{imagenes/add}
\captionof{figure}{Directorio del Backend}
 \label{fig:cognito} 
\end{center} 

Obteniendo el siguiente menú:

\begin{center}
  \includegraphics[scale=0.5]{imagenes/menu}
\captionof{figure}{Directorio del Backend}
 \label{fig:cognito} 
\end{center} 

Dejamos seleccionado la primera opción, la cual nos permitirá utilizar los servicios de autenticación ofrecidos por Amazon Cognito, además de otros serivios de la suite de AWS.

Finalmente utilizamos el comando \emph{amplify push} para desplegar los cambios a nuestra aplicación.





\subsection{Resultados}

\begin{center}
  \includegraphics[scale=0.5]{imagenes/console}
\captionof{figure}{Directorio del Backend}
 \label{fig:cognito} 
\end{center} 

Entrando a nuestra consola de AWS, en la sección de Amazon Cognito, se puede observar dos grupos de usuarios, uno de tipo Administrador, el cual puede realizar cambios a la configuración de la aplicación, y otro de tipo de Usuario, el cual sólo puede hacer uso del sistema de inició de sesión y registro ofrecido por Cognito.

\begin{center}
  \includegraphics[scale=0.5]{imagenes/pools}
\captionof{figure}{Grupos de usuario}
 \label{fig:cognito} 
\end{center} 

\begin{center}
  \includegraphics[scale=0.4]{imagenes/admin}
\captionof{figure}{Grupos de usuario}
 \label{fig:cognito} 
\end{center} 

\begin{center}
  \includegraphics[scale=0.4]{imagenes/users}
\captionof{figure}{Grupos de usuario}
 \label{fig:cognito} 
\end{center} 



\newpage
\section{Creación de la base de datos No Relacional}


\subsection{Objetivo}
Crear la base de datos en MongoDB.


\subsection{Descripción}



\subsection{Resultados}


\newpage
\section{Investigación de modelos de Redes Neuronales Convolucionales}

\subsection{Objetivo}
Determinar distintos modelos de redes neuronales convolucionales que ofrezcan mejor eficiancia al clasificar imágenes.

\subsection{Descripción}

\subsection{Resultados}


\newpage
\section{Diseño de una red neuronal convolucional capaz de detectar ojos cerrados y abiertos}

\subsection{Objetivo}
Diseñar y realizar pruebas de los modelos de redes neuronales convolucionales previamente investigados para determinar el rendimiento y la precisión de cada uno.

\subsection{Descripción}

\subsection{Resultados}


\newpage
\section{Conclusiones}
Para el desarrollo de la Estación base, se decidió utilizar la suite de herramientas de Amazon Amplify. Se hará uso de Amplify Hosting, el cuál tiene una integración directa con Github, esto quiere decir, que los cambios que se realicen en el repositorio se reflejarán de manera automática en la aplicación web. Además, AWS Amplify ofrece su servicio de almacenamiento en la nube S3, este será de gran ayuda para almacenar contenido multimedia, en este caso los videos de incidencia de los conductores. Para el manejo de credenciales, se utilizará Amazon Cognito, que se encargará de administrar las credenciales de acceso a la aplicación. Para el manejo de datos, se estará utilizando MongoDB, un manejador NoSQL que trabaja con documentos.  Para el desarrollo de la aplicación, se decidió utilizar el lenguaje de programación Javascript, junto con NodeJs que nos ayudará a manejar varias peticiones al mismo tiempo. 
Finalmente el análisis del sistema de comunicaciones,en un principio sólo se había contemplado el análisis de telemetría pero al ir realizando las actividades del tercer reporte e ir profundizando en algunos temas de comunicaciones, se decidió que también que se necesitaba el análisis de la cobertura y de los datos, es decir,de la transmisión de los fotogramas por lo que se incluyeron también en este reporte.

\newpage
\section{Bibliografia}
%\bibliographystyle{apacite}

\begin{thebibliography}{10} %10 significa el número máximo de items
%Aquí ponga la bibliografía y referencias usadas

%Artículo:




\end{thebibliography}




\end{document}


